<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/other-guides/testbed" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.3.2">
<title data-rh="true">Testbed | OSISM – Sovereign Cloud Infrastructure</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://osism.tech/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://osism.tech/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://osism.tech/docs/guides/other-guides/testbed"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="de"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Testbed | OSISM – Sovereign Cloud Infrastructure"><meta data-rh="true" name="description" content="With the OSISM Testbed, it is possible to run a full Sovereign Cloud Stack"><meta data-rh="true" property="og:description" content="With the OSISM Testbed, it is possible to run a full Sovereign Cloud Stack"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://osism.tech/docs/guides/other-guides/testbed"><link data-rh="true" rel="alternate" href="https://osism.tech/docs/guides/other-guides/testbed" hreflang="en"><link data-rh="true" rel="alternate" href="https://osism.tech/de/docs/guides/other-guides/testbed" hreflang="de"><link data-rh="true" rel="alternate" href="https://osism.tech/docs/guides/other-guides/testbed" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="OSISM – Sovereign Cloud Infrastructure RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="OSISM – Sovereign Cloud Infrastructure Atom Feed"><link rel="stylesheet" href="/assets/css/styles.ca928f80.css">
<script src="/assets/js/runtime~main.fa00f83f.js" defer="defer"></script>
<script src="/assets/js/main.6d934c8d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="OSISM Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="OSISM Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Documentation</a><a class="navbar__item navbar__link" href="/users">Users</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/guides/other-guides/testbed" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/de/docs/guides/other-guides/testbed" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="de">Deutsch</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://regiocloud.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">REGIO<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://scs.community" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Sovereign Cloud Stack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="mailto:info@osism.tech?subject=OSISM Demo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Schedule a demo<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/guides/">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/concept-guide/">Concept Guide</a><button aria-label="Expand sidebar category &#x27;Concept Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/deploy-guide/">Deploy Guide</a><button aria-label="Expand sidebar category &#x27;Deploy Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/upgrade-guide/">Upgrade Guide</a><button aria-label="Expand sidebar category &#x27;Upgrade Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/configuration-guide/">Configuration Guide</a><button aria-label="Expand sidebar category &#x27;Configuration Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/operations-guide/">Operations Guide</a><button aria-label="Expand sidebar category &#x27;Operations Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/troubleshooting-guide/">Troubleshooting Guide</a><button aria-label="Expand sidebar category &#x27;Troubleshooting Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/user-guide/">User Guide</a><button aria-label="Expand sidebar category &#x27;User Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/guides/other-guides/">Other Guides</a><button aria-label="Collapse sidebar category &#x27;Other Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/other-guides/cloud-in-a-box">Cloud in a Box Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/other-guides/contributor-guide">Contributor Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/guides/other-guides/developer-guide/">Developer Guide</a><button aria-label="Expand sidebar category &#x27;Developer Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/other-guides/style-guide">Style Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/other-guides/testbed">Testbed Guide</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/references/">References</a><button aria-label="Expand sidebar category &#x27;References&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/release-notes/">Release Notes</a><button aria-label="Expand sidebar category &#x27;Release Notes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/appendix/">Appendix</a><button aria-label="Expand sidebar category &#x27;Appendix&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/guides/"><span itemprop="name">Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/guides/other-guides/"><span itemprop="name">Other Guides</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Testbed Guide</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Testbed</h1>
<p>With the OSISM Testbed, it is possible to run a full Sovereign Cloud Stack
deployment on an existing OpenStack environment such as Cleura or <a href="https://regio.digital" target="_blank" rel="noopener noreferrer">REGIO.cloud</a>.</p>
<p>OSISM is the reference implementation for the Infrastructure as a Service (IaaS) layer in the
<a href="https://scs.community" target="_blank" rel="noopener noreferrer">Sovereign Cloud Stack</a> (SCS) project. The OSISM Testbed is therefore
used in the SCS project to test and work on the Instrastructure as a Service layer.</p>
<p>The OSISM Testbed is intended as a playground. Further services and integration will
be added over time. A increasing number of best practices and experiences from the productive
deployments will be included here in the future. It will become more production-like
over time. However, at no point does it claim to represent a production setup exactly.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-access">Cloud access<a href="#cloud-access" class="hash-link" aria-label="Direct link to Cloud access" title="Direct link to Cloud access">​</a></h3>
<p>The usual prerequisite is to have an account on one of the supported OpenStack cloud providers.
As the OSISM Testbed also virtualizes systems itself, the OpenStack cluster should provide
the capabilities for nested virtualization.</p>
<p>It is not part of this guide to describe the registration with the individual cloud
providers. Please contact the respective cloud provider for this.</p>
<table><thead><tr><th style="text-align:left">Product</th><th style="text-align:left">Provider</th><th style="text-align:left">Profile name</th><th style="text-align:left">Note</th></tr></thead><tbody><tr><td style="text-align:left">Cleura</td><td style="text-align:left">Cleura</td><td style="text-align:left"><code>cleura</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Fuga Cloud</td><td style="text-align:left">FUGA</td><td style="text-align:left"><code>fuga</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">HuaweiCloud</td><td style="text-align:left">HuaweiCloud</td><td style="text-align:left"><code>huaweicloud</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">OVH</td><td style="text-align:left">OVH</td><td style="text-align:left"><code>ovh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">OpenTelekomCloud</td><td style="text-align:left">T-Systems</td><td style="text-align:left"><code>otc</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">pluscloud open</td><td style="text-align:left">plusserver</td><td style="text-align:left"><code>pluscloudopen</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">pluscloud SCS Test</td><td style="text-align:left">plusserver</td><td style="text-align:left"><code>gx-scs</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">REGIO.cloud</td><td style="text-align:left">OSISM</td><td style="text-align:left"><code>regiocloud</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">REGIO.cloud</td><td style="text-align:left">OSISM</td><td style="text-align:left"><code>regio-fast</code></td><td style="text-align:left">boot from NVMe SSD backed volumes</td></tr><tr><td style="text-align:left">Wavestack</td><td style="text-align:left">noris network</td><td style="text-align:left"><code>wavestack</code></td><td style="text-align:left"></td></tr></tbody></table>
<p>For each cloud provider listed in the table, a predefined profile is available in the
<code>terraform/environments</code> directory. This profile contains the name of the public
network, which flavors to use, etc.</p>
<p>Here is an example from the profile for <a href="https://regio.digital" target="_blank" rel="noopener noreferrer">REGIO.cloud</a>.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flavor_manager            = &quot;SCS-4V-16-50&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flavor_node               = &quot;SCS-8V-32-50&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volume_type               = &quot;ssd&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image                     = &quot;Ubuntu 22.04&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">image_node                = &quot;Ubuntu 22.04&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public                    = &quot;public&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">availability_zone         = &quot;nova&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volume_availability_zone  = &quot;nova&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">network_availability_zone = &quot;nova&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cloud-resources">Cloud resources<a href="#cloud-resources" class="hash-link" aria-label="Direct link to Cloud resources" title="Direct link to Cloud resources">  ​</a></h3>
<p>The OSISM Testbed requires at least the following project quota when using the default flavors:</p>
<table><thead><tr><th style="text-align:left">Quantity</th><th style="text-align:left">Resource</th><th style="text-align:left">Note</th></tr></thead><tbody><tr><td style="text-align:left">4</td><td style="text-align:left">Instances</td><td style="text-align:left">28 VCPUs + 112 GByte RAM (3 modes, 1 manager)</td></tr><tr><td style="text-align:left">9</td><td style="text-align:left">Volumes</td><td style="text-align:left">90 GByte volume storage</td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">Floating IP</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">Keypair</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">Security group</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">16</td><td style="text-align:left">Security group rules</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">Network</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">Subetwork</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">6</td><td style="text-align:left">Ports</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">1</td><td style="text-align:left">Router</td><td style="text-align:left"></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="software">Software<a href="#software" class="hash-link" aria-label="Direct link to Software" title="Direct link to Software">​</a></h3>
<ul>
<li><code>make</code> must be installed on the system</li>
<li>Wireguard or <code>sshuttle</code> must be installed on your system for VPN access</li>
<li><code>virtualenv</code> must be installed for managing python dependencies like Ansible</li>
<li>Python must be installed, the Python version used must be at least 3.10, otherwise
the current Ansible release cannot be used (details in the
<a href="https://docs.ansible.com/ansible/latest/reference_appendices/release_and_maintenance.html#ansible-core-support-matrix" target="_blank" rel="noopener noreferrer">Ansible support matrix</a>)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment">Deployment<a href="#deployment" class="hash-link" aria-label="Direct link to Deployment" title="Direct link to Deployment">​</a></h2>
<p>This section describes step by step how to deploy the OSISM Testbed.</p>
<ol>
<li>
<p>Request access from the administrator of the respective cloud or get access to an OpenStack cloud.</p>
</li>
<li>
<p>Clone the <a href="https://github.com/osism/testbed" target="_blank" rel="noopener noreferrer">osism/testbed</a> repository.</p>
<p>The repository can also be cloned to any other location.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p ~/src/github.com/osism</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/osism/testbed ~/src/github.com/osism/testbed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd ~/src/github.com/osism/testbed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Configure your cloud access profile</p>
<p>The access data for the cloud provider used is stored in <code>terraform/clouds.yaml</code> and (optionally)
in <code>terraform/secure.yaml</code> (same structure, if you want to store credentials on a separate place).</p>
<p>In file <a href="https://github.com/osism/testbed/blob/main/terraform/clouds.yaml.sample" target="_blank" rel="noopener noreferrer">terraform/clouds.yaml.sample</a>
you will find examples of typical setups. Settings that are identical for all users of a cloud can be defined
centrally via the profiles of the file
<a href="https://github.com/osism/testbed/blob/main/terraform/clouds-public.yaml" target="_blank" rel="noopener noreferrer">terraform/clouds-public.yaml</a>.
You can reference these settings by using the <code>profile</code> parameter in cloud-specific
definition in <code>terraform/clouds.yaml</code>.</p>
<p>The user specific settings of the <code>clouds.yaml</code> file are provided by the cloud provider. Please check the
documentation  of the cloud provider you are using or their support for details.</p>
<p><a href="https://regio.digital" target="_blank" rel="noopener noreferrer">REGIO.cloud</a> is used as an example here. The cloud name in <code>clouds.yaml</code>
and the environment name (value of <code>ENVIRONMENT</code>) are <code>regiocloud</code> in this case. It is important that
the name of the cloud in <code>clouds.yaml</code> matches the name of the environment to be used. The names must
be identical. It is currently not possible to name the cloud <code>regiocloud-123</code> in <code>clouds.yaml</code> if the
environment is <code>regiocloud</code>.</p>
<p>If another cloud is used, replace <code>regiocloud</code> with the respective profile name <a href="#cloud-access">from the table above</a>.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Application Credentials</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Username/Password</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>The use of application credentials is preferred. This way it is not necessary to store
details like username, project name or sensitive information like the password in the
<code>clouds.yaml</code> file.</p><p>The application credentials can be found in Horizon under <strong>Identity</strong>. Use <code>OSISM Testbed</code> as
name and click <code>Create Application Credential</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">terraform/clouds.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">clouds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">regiocloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">profile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> regiocloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">auth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">application_credential_id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">application_credential_secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SECRET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">auth_type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v3applicationcredential&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to make use of <code>terraform/secure.yaml</code> add your application credential secret there
instead of <code>terraform/clouds.yaml</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">terraform/secure.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">clouds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">regiocloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">auth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">application_credential_secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SECRET</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">terraform/clouds.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">clouds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">regiocloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">profile</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> regiocloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">auth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">project_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PROJECT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">username</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> USERNAME</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">project_domain_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DOMAIN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">user_domain_name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> DOMAIN</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you want to make use of <code>terraform/secure.yaml</code> add your password there instead of <code>terraform/clouds.yaml</code>.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">terraform/secure.yaml</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">clouds</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">regiocloud</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">auth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">password</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PASSWORD</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
</li>
<li>
<p>Prepare the deployment.</p>
<p>The versions of Ansible and <a href="https://opentofu.org" target="_blank" rel="noopener noreferrer">OpenTofu</a> are managed
automatically and necessary dependencies are cloned.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make prepare</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If any error occurs during preparation and you want to run the preparation
again, it is important to run <code>make wipe-local-install</code> first. Otherwise the
preparation will not be redone completely and necessary parts will be missing
later on.</p>
</li>
<li>
<p>Create the infrastructure with OpenTofu.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make ENVIRONMENT=regiocloud create</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Deploy the OSISM manager and bootstrap all nodes.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Deploy latest manager version</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Deploy a stable manager version</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make ENVIRONMENT=regiocloud manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make ENVIRONMENT=regiocloud VERSION_MANAGER=7.0.3 manager</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
</li>
<li>
<p>After the bootstrap, you can log in to the manager via SSH.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make ENVIRONMENT=regiocloud login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Yo can log in to the nodes of the cluster via the manager.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">osism console testbed-node-0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Deploy all services.</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Deployment in single steps</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Deployment of all services</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>It is also possible to deploy the services step by step on the
manager. To do this, first log in to the manager with <code>make ENVIRONMENT=regiocloud login</code>
and then execute the deploy scripts one after the other. It is recommended to do this
within a screen session.</p><p>Deploying the services takes some time and depends on how much bandwidth is available,
how the instances are equipped, etc. 90-120 minutes is not unusual when Ceph and OpenStack
are fully deployed.</p><p>To speed up the Ansible playbooks, <a href="https://ara.recordsansible.org" target="_blank" rel="noopener noreferrer">ARA</a> can be disabled. This
is done by executing <code>/opt/configuration/scripts/disable-ara.sh</code>. Run this script <strong>before</strong> the deployment scripts.
Afterwards no more logs are available in the ARA web
interface. To re-enable ARA use <code>/opt/configuration/scripts/enable-ara.sh</code>.</p><p>There is also the option of pre-population of images with <code>/opt/configuration/scripts/pull-images.sh</code>
so that deployments do not have to be lengthy. Run this script <strong>before</strong> the deployment scripts.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/deploy/001-helper-services.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/deploy/005-kubernetes.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/deploy/100-ceph-services-basic.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/deploy/200-infrastructure-services-basic.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/deploy/300-openstack-services-basic.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/deploy/400-monitoring-services.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Prepare OpenStack resources like public network, flavors and images by running
<code>/opt/configuration/scripts/bootstrap.sh</code>. Run this script <strong>after</strong> the deployment scripts.</p><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If you only want to deploy the monitoring services with <code>/opt/configuration/scripts/deploy/400-monitoring-services.sh</code>,
a few dependencies must be deployed first. You can then use the monitoring services without having to install a
complete OpenStack &amp; Ceph environment.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">osism apply common</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osism apply loadbalancer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osism apply opensearch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">osism apply mariadb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>In this single step deployment, Ceph, OpenStack and all necessary
infrastructure services (MariaDB, RabbitMQ, ...) are deployed.
Depending on the cloud, the deployment will take some time. Up to two hours is not unusual.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make ENVIRONMENT=regiocloud deploy</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
</li>
<li>
<p>If you want to verify the deployment with <a href="https://opendev.org/openinfra/refstack" target="_blank" rel="noopener noreferrer">refstack</a> run
<code>/opt/configuration/scripts/check.sh</code>. This step will take some time and is optional.</p>
</li>
<li>
<p>The machine images required for the use of Kubernetes Cluster API and the amphora driver of OpenStack Octavia
service are not provided by default to save resources on the OSISM Testbed and improve deployment time.
These can be provisioned if required.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/bootstrap/301-openstack-octavia-amhpora-image.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/opt/configuration/scripts/bootstrap/302-openstack-k8s-clusterapi-images.sh</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If you want you can create a test project with a test user after login. It also
creates an instance with a volume attached to a network with a router. This step is optional.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">osism apply --environment openstack test</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>When the OSISM Testbed is no longer needed, it can be deleted.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make ENVIRONMENT=regiocloud clean</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2>
<p>Deployment must be completed at this point.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="custom-ca">Custom CA<a href="#custom-ca" class="hash-link" aria-label="Direct link to Custom CA" title="Direct link to Custom CA">​</a></h3>
<p>The OSISM Testbed deployment currently uses hostnames in the domain <code>testbed.osism.xyz</code>. This is a real domain
and we provide the DNS records matching the addresses used in the OSISM Testbed, so that once you connect to your testbed via a direct
link or Wireguard, you can access hosts and servers by their hostname (e.g. <code>ssh testbed-manager.testbed.osism.xyz</code>).</p>
<p>We also provide a wildcard TLS certificate signed by a custom CA for <code>testbed.osism.xyz</code> and <code>*.testbed.osism.xyz</code>.
This CA is always used for each testbed. The CA is not regenerated and it is not planned to change this for the next 10 years.</p>
<p>In order for these certificates to be recognized locally as valid, the CA
<a href="https://raw.githubusercontent.com/osism/testbed/main/environments/kolla/certificates/ca/testbed.crt" target="_blank" rel="noopener noreferrer">environments/kolla/certificates/ca/testbed.crt</a>
must be imported locally.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vpn-access">VPN access<a href="#vpn-access" class="hash-link" aria-label="Direct link to VPN access" title="Direct link to VPN access">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="wireguard">Wireguard<a href="#wireguard" class="hash-link" aria-label="Direct link to Wireguard" title="Direct link to Wireguard">​</a></h4>
<p>Install wireguard on your workstation, if you have not done this before. For instructions how to do
it on your workstation, please have a look on the documentation of your used distribution. The
wireguard documentation you will find <a href="https://www.wireguard.com" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Start the wireguard tunnel.
(Press CTRL+c to keep the tunnel running forever. The make target also launches a browser tab with references to all services)</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make vpn-wireguard ENVIRONMENT=regiocloud</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to connect to the OSISM Testbed from multiple clients, change the client IP
address in the downloaded configuration file to be different on each client.</p>
<p>If you only want to download the Wireguard configuration, you can use the <code>vpn-wireguard-config</code>
target. The configuration is then available in the file <code>wg-testbed-regiocloud.conf</code>, for example.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make vpn-wireguard-config ENVIRONMENT=regiocloud</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sshuttle">sshuttle<a href="#sshuttle" class="hash-link" aria-label="Direct link to sshuttle" title="Direct link to sshuttle">​</a></h4>
<p>If you do not want to use Wireguard you can also work with <a href="https://github.com/sshuttle/sshuttle" target="_blank" rel="noopener noreferrer">sshuttle</a>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">make vpn-sshuttle ENVIRONMENT=regiocloud</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">killall sshuttle</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="static-entries-in-etchosts">Static entries in <code>/etc/hosts</code><a href="#static-entries-in-etchosts" class="hash-link" aria-label="Direct link to static-entries-in-etchosts" title="Direct link to static-entries-in-etchosts">​</a></h3>
<p>If you are unable to access the following domains, you can customize your local <code>/etc/hosts</code>
with the following static entries. This may be necessary, for example, if you use Pi-hole and
all DNS entries from a public DNS with a non-public IP address are filtered.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># OSISM Testbed hosts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   ara.testbed.osism.xyz             ara</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   cgit.testbed.osism.xyz            cgit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   flower.testbed.osism.xyz          flower</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   homer.testbed.osism.xyz           homer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   netbox.testbed.osism.xyz          netbox</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   testbed-manager.testbed.osism.xyz testbed-manager</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   nexus.testbed.osism.xyz           nexus</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.5   phpmyadmin.testbed.osism.xyz      phpmyadmin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.9   api-int.testbed.osism.xyz         api-int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.10  testbed-node-0.testbed.osism.xyz  testbed-node-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.11  testbed-node-1.testbed.osism.xyz  testbed-node-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.12  testbed-node-2.testbed.osism.xyz  testbed-node-2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.13  testbed-node-3.testbed.osism.xyz  testbed-node-3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.14  testbed-node-4.testbed.osism.xyz  testbed-node-4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.15  testbed-node-5.testbed.osism.xyz  testbed-node-5</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.16  testbed-node-6.testbed.osism.xyz  testbed-node-6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.17  testbed-node-7.testbed.osism.xyz  testbed-node-7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.18  testbed-node-8.testbed.osism.xyz  testbed-node-8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.19  testbed-node-9.testbed.osism.xyz  testbed-node-9</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.100 keycloak.testbed.osism.xyz        keycloak</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">192.168.16.254 api.testbed.osism.xyz             api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="webinterfaces">Webinterfaces<a href="#webinterfaces" class="hash-link" aria-label="Direct link to Webinterfaces" title="Direct link to Webinterfaces">​</a></h3>
<p>All SSL enabled services within the OSISM Testbed use certs which are signed by the self-signed
<a href="https://raw.githubusercontent.com/osism/testbed/main/environments/kolla/certificates/ca/testbed.crt" target="_blank" rel="noopener noreferrer">OSISM Testbed CA</a>
(Download the file and import it as certification authority to your browser).</p>
<p>If you want to access the services please choose the URL from the following table.</p>
<table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">URL</th><th style="text-align:left">Username</th><th style="text-align:left">Password</th><th style="text-align:left">Note</th></tr></thead><tbody><tr><td style="text-align:left">ARA</td><td style="text-align:left"><a href="https://ara.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://ara.testbed.osism.xyz</a></td><td style="text-align:left">ara</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Ceph</td><td style="text-align:left"><a href="https://api-int.testbed.osism.xyz:8140" target="_blank" rel="noopener noreferrer">https://api-int.testbed.osism.xyz:8140</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Flower</td><td style="text-align:left"><a href="https://flower.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://flower.testbed.osism.xyz</a></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Grafana</td><td style="text-align:left"><a href="https://api-int.testbed.osism.xyz:3000" target="_blank" rel="noopener noreferrer">https://api-int.testbed.osism.xyz:3000</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">HAProxy (testbed-node-0)</td><td style="text-align:left"><a href="http://testbed-node-0.testbed.osism.xyz:1984" target="_blank" rel="noopener noreferrer">http://testbed-node-0.testbed.osism.xyz:1984</a></td><td style="text-align:left">openstack</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">HAProxy (testbed-node-1)</td><td style="text-align:left"><a href="http://testbed-node-1.testbed.osism.xyz:1984" target="_blank" rel="noopener noreferrer">http://testbed-node-1.testbed.osism.xyz:1984</a></td><td style="text-align:left">openstack</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">HAProxy (testbed-node-2)</td><td style="text-align:left"><a href="http://testbed-node-2.testbed.osism.xyz:1984" target="_blank" rel="noopener noreferrer">http://testbed-node-2.testbed.osism.xyz:1984</a></td><td style="text-align:left">openstack</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Homer</td><td style="text-align:left"><a href="https://homer.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://homer.testbed.osism.xyz</a></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Horizon (via Keycloak)</td><td style="text-align:left"><a href="https://api.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://api.testbed.osism.xyz</a></td><td style="text-align:left">alice</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Horizon (via Keystone)</td><td style="text-align:left"><a href="https://api.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://api.testbed.osism.xyz</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left">domain: default</td></tr><tr><td style="text-align:left">Horizon (via Keystone)</td><td style="text-align:left"><a href="https://api.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://api.testbed.osism.xyz</a></td><td style="text-align:left">test</td><td style="text-align:left">test</td><td style="text-align:left">domain: test</td></tr><tr><td style="text-align:left">Keycloak</td><td style="text-align:left"><a href="https://keycloak.testbed.osism.xyz/auth" target="_blank" rel="noopener noreferrer">https://keycloak.testbed.osism.xyz/auth</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Netbox</td><td style="text-align:left"><a href="https://netbox.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://netbox.testbed.osism.xyz</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Netdata</td><td style="text-align:left"><a href="http://testbed-manager.testbed.osism.xyz:19999" target="_blank" rel="noopener noreferrer">http://testbed-manager.testbed.osism.xyz:19999</a></td><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Nexus</td><td style="text-align:left"><a href="https://nexus.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://nexus.testbed.osism.xyz</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">OpenSearch Dashboards</td><td style="text-align:left"><a href="https://api.testbed.osism.xyz:5601" target="_blank" rel="noopener noreferrer">https://api.testbed.osism.xyz:5601</a></td><td style="text-align:left">opensearch</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">Prometheus</td><td style="text-align:left"><a href="https://api-int.testbed.osism.xyz:9091" target="_blank" rel="noopener noreferrer">https://api-int.testbed.osism.xyz:9091</a></td><td style="text-align:left">admin</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">RabbitMQ</td><td style="text-align:left"><a href="https://api-int.testbed.osism.xyz:15672" target="_blank" rel="noopener noreferrer">https://api-int.testbed.osism.xyz:15672</a></td><td style="text-align:left">openstack</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">phpMyAdmin</td><td style="text-align:left"><a href="https://phpmyadmin.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">https://phpmyadmin.testbed.osism.xyz</a></td><td style="text-align:left">root</td><td style="text-align:left">password</td><td style="text-align:left"></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-with-oidc">Authentication with OIDC<a href="#authentication-with-oidc" class="hash-link" aria-label="Direct link to Authentication with OIDC" title="Direct link to Authentication with OIDC">​</a></h3>
<p>Authentication with OpenID Connect (OIDC) is possible via Keycloak, which is automatically configured for the OIDC mechanism.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openstack-web-dashboard-horizon-login-via-oidc">OpenStack web dashboard (Horizon) login via OIDC<a href="#openstack-web-dashboard-horizon-login-via-oidc" class="hash-link" aria-label="Direct link to OpenStack web dashboard (Horizon) login via OIDC" title="Direct link to OpenStack web dashboard (Horizon) login via OIDC">​</a></h4>
<p>For logging in via OIDC, open your browser at OpenStack Dashboard Login Page, select <strong>Authenticate via Keycloak</strong>, after being
redirected to the Keycloak login page, perform the login with the credentials <strong>alice</strong> and <strong>password</strong>.
After that you will be redirected back to the Horizon dashboard, where you will be logged in with the user <strong>alice</strong>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openstack-web-dashboard-horizon-logout">OpenStack web dashboard (Horizon) logout<a href="#openstack-web-dashboard-horizon-logout" class="hash-link" aria-label="Direct link to OpenStack web dashboard (Horizon) logout" title="Direct link to OpenStack web dashboard (Horizon) logout">​</a></h4>
<p>Keep in mind, that clicking <strong>Sign Out</strong> on the Horizon dashboard currently doesn&#x27;t revoke your OIDC token, and any consequent
attempt to <strong>Authenticate via Keycloak</strong> will succeed without providing the credentials.</p>
<p>The expiration time of the Single Sign On tokens can be controlled on multiple levels in Keycloak.</p>
<ol>
<li>
<p>On realm level under <em>Realm Settings</em> &gt; <em>Tokens</em>.
Assuming the <em>keycloak_realm</em> ansible variable is the default <em>osism</em>, and keycloak is listening on
<a href="https://keycloak.testbed.osism.xyz" target="_blank" rel="noopener noreferrer">keycloak.testbed.osism.xyz</a>, then the configuration form is available
<a href="https://keycloak.testbed.osism.xyz/auth/admin/master/console/#/realms/osism/token-settings" target="_blank" rel="noopener noreferrer">here</a>.</p>
<p>Detailed information is available in the Keycloak Server Administrator Documentation
<a href="https://www.keycloak.org/docs/latest/server_admin/#_timeouts" target="_blank" rel="noopener noreferrer">Session and Token Timeouts</a> section.</p>
</li>
<li>
<p>In a realm down on the <a href="https://keycloak.testbed.osism.xyz/auth/admin/master/console/#/realms/osism/clients" target="_blank" rel="noopener noreferrer">client level</a>
select the client (keystone), and under <em>Settings</em> &gt; <em>Advanced Settings</em>.</p>
<p>It is recommended to keep the <em>Access Token Lifespan</em> on a relatively low value, with the trend of blocking third party
cookies. For further information see the Keycloak documentation&#x27;s <a href="https://www.keycloak.org/docs/latest/securing_apps/#browsers-with-blocked-third-party-cookies" target="_blank" rel="noopener noreferrer">Browsers with Blocked Third-Party Cookies</a> section.</p>
</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usage-of-the-openstack-cli">Usage of the OpenStack CLI<a href="#usage-of-the-openstack-cli" class="hash-link" aria-label="Direct link to Usage of the OpenStack CLI" title="Direct link to Usage of the OpenStack CLI">​</a></h4>
<p>The <code>environments/openstack</code> folder contains the needed files for the openstack client:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd environments/openstack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export OS_CLOUD=&lt;the cloud environment&gt;  # i.e. admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openstack floating ip list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openstack-cli-operations-with-openid-connect-password">OpenStack CLI operations with OpenID Connect password<a href="#openstack-cli-operations-with-openid-connect-password" class="hash-link" aria-label="Direct link to OpenStack CLI operations with OpenID Connect password" title="Direct link to OpenStack CLI operations with OpenID Connect password">​</a></h4>
<p>Using the OpenStack cli is also possible via OIDC, assuming you provisioned the user <strong>alice</strong> with password <strong>password</strong>,
then you can perform a simple <code>project list</code> operation like this:</p>
<p>See chapter &quot;Usage the OpenStack CLI&quot; for basic openstack usage.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openstack \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-cacert /etc/ssl/certs/ca-certificates.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-auth-url https://api.testbed.osism.xyz:5000/v3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-auth-type v3oidcpassword \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-client-id keystone \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-client-secret 0056b89c-030f-486b-a6ad-f0fa398fa4ad \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-username alice \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-password password \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-identity-provider keycloak \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-protocol openid \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-identity-api-version 3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-discovery-endpoint https://keycloak.testbed.osism.xyz/auth/realms/osism/.well-known/openid-configuration \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">project list</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openstack-cli-token-issue-with-openid-connect">OpenStack CLI token issue with OpenID Connect<a href="#openstack-cli-token-issue-with-openid-connect" class="hash-link" aria-label="Direct link to OpenStack CLI token issue with OpenID Connect" title="Direct link to OpenStack CLI token issue with OpenID Connect">​</a></h4>
<p>It is also possible to exchange your username/password to a token, for further use with the cli.
The <code>token issue</code> subcommand returns an SQL table, in which the <code>id</code> column&#x27;s <code>value</code> field contains the token:</p>
<p>See chapter &quot;Usage the OpenStack CLI&quot; for basic openstack usage.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openstack \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-cacert /etc/ssl/certs/ca-certificates.crt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-auth-url https://api.testbed.osism.xyz:5000/v3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-auth-type v3oidcpassword \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-client-id keystone \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-client-secret 0056b89c-030f-486b-a6ad-f0fa398fa4ad \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-username alice \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-password password \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-identity-provider keycloak \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-protocol openid \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-identity-api-version 3 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-discovery-endpoint https://keycloak.testbed.osism.xyz/auth/realms/osism/.well-known/openid-configuration \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> --os-openid-scope &quot;openid profile email&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">token issue \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -c id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -f value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>An example token is like:</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">gAAAAABhC98gL8nsQWknro3JWDXWLFCG3CDr3Mi9OIlvVAZMjy2mNgYtlXv_0yAIy-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nSlLAaLIGhht17-mwf8uclKgRuNVsYLSmgUpB163l89-ch2w2_OFe9zNSQNWf4qfd8</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cl7E7XvvUoFr1N8Gh09vaYLvRvYgCGV05xBUSs76qCHa0qElPUsk56s5ft4ALrSrzD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4cEQRVb5PXNjywdZk9_gtJziz31A7sD4LPIy82O5N9NryDoDw</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>TODO: OpenStack CLI operations with token</li>
<li>TODO: OpenStack CLI token revoke</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-usage">Advanced Usage<a href="#advanced-usage" class="hash-link" aria-label="Direct link to Advanced Usage" title="Direct link to Advanced Usage">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-api">External API<a href="#external-api" class="hash-link" aria-label="Direct link to External API" title="Direct link to External API">​</a></h3>
<p>It is possible to provide the OpenStack APIs and the OpenStack Dashboard via the manager&#x27;s public IP address.
This is not enabled by default, with the exception of the OTC profile. To provide the OpenStack APIs and the
OpenStack dashboard via the public IP address of the manager, the following changes are necessary in the
<code>terraform/environments/regiocloud.tfvars</code> file. If a cloud other than the REGIO.cloud is used, the profile
of the other cloud is changed accordingly.</p>
<ol>
<li>
<p>Add the customisation <code>external_api</code>. This customisation makes sure that the required security group rules
are created for the various OpenStack APIs and the OpenStack dashboard.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># customisation:external_api</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Set parameter <code>external_api</code> to <code>true</code>. This makes sure that all necessary changes are made in the configuration
repository when the Manager service is deployed. It is correct that this is added as a comment.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">external_api = true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>After the deployment of the Manager service and the OpenStack services, the OpenStack APIs and the OpenStack
dashboard can be reached via a DNS name. The service <a href="https://traefik.me" target="_blank" rel="noopener noreferrer">traefik.me</a> is used for the DNS record.
Run the following two commands on the manager node to get the DNS record.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ source /opt/manager-vars.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ echo &quot;api-${MANAGER_PUBLIC_IP_ADDRESS//./-}.traefik.me&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">api-80-158-46-219.traefik.me</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="change-versions">Change versions<a href="#change-versions" class="hash-link" aria-label="Direct link to Change versions" title="Direct link to Change versions">​</a></h3>
<ol>
<li>Go to <code>/opt/configuration</code> on <code>testbed-manager</code></li>
<li>Run <code>./scripts/set-openstack-version.sh 2023.2</code> to set the OpenStack version to <code>2023.2</code></li>
<li>Run <code>./scripts/set-ceph-version.sh reef</code> to set the Ceph version to <code>reef</code></li>
<li>Run <code>osism update manager</code> to update the Manager service</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploy-services">Deploy services<a href="#deploy-services" class="hash-link" aria-label="Direct link to Deploy services" title="Direct link to Deploy services">​</a></h3>
<table><thead><tr><th style="text-align:left">Script</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/000-manager-service.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/001-helper-services.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/100-ceph-services-basic.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/200-infrastructure-services-basic.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/210-infrastructure-services-extended.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/300-openstack-services-basic.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/310-openstack-services-extended.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/320-openstack-services-baremetal.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/330-openstack-services-additional.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/deploy/400-monitoring-services.sh</code></td><td style="text-align:left"></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-services">Upgrade services<a href="#upgrade-services" class="hash-link" aria-label="Direct link to Upgrade services" title="Direct link to Upgrade services">​</a></h3>
<table><thead><tr><th style="text-align:left">Script</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>/opt/configuration/scripts/upgrade/100-ceph-services.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/upgrade/200-infrastructure-services-basic.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/upgrade/300-openstack-services-basic.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/upgrade/310-openstack-services-extended.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/upgrade/320-openstack-services-baremetal.sh</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>/opt/configuration/scripts/upgrade/330-openstack-services-additional.sh</code></td><td style="text-align:left"></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ansible-errors">Ansible errors<a href="#ansible-errors" class="hash-link" aria-label="Direct link to Ansible errors" title="Direct link to Ansible errors">​</a></h3>
<p>Ansible errors that have something to do with undefined variables (e.g. <code>AnsibleUndefined</code>) are most likely due to cached
facts that are no longer valid. The facts can be updated by running <code>osism apply facts</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="unsupported-locale-setting">Unsupported locale setting<a href="#unsupported-locale-setting" class="hash-link" aria-label="Direct link to Unsupported locale setting" title="Direct link to Unsupported locale setting">​</a></h3>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ make prepare</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ansible-playbook -i localhost, ansible/check-local-versions.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ERROR: Ansible could not initialize the preferred locale: unsupported locale setting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">make: *** [prepare] Error 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To solve the problem you have to modify the <code>Makefile</code>. Change the 1st line as follows.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">export LC_ALL=en_US.UTF-8</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To find out the locale used on the system <code>printenv</code> can be used.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ printenv | grep -i lang|locale</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LANG=&quot;en_US.UTF-8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LC_COLLATE=&quot;en_US.UTF-8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LC_CTYPE=&quot;UTF-8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LC_MESSAGES=&quot;en_US.UTF-8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LC_MONETARY=&quot;en_US.UTF-8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LC_NUMERIC=&quot;en_US.UTF-8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LC_TIME=&quot;en_US.UTF-8&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">LC_ALL=</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix">Appendix<a href="#appendix" class="hash-link" aria-label="Direct link to Appendix" title="Direct link to Appendix">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h3>
<p>This section describes how to configure and customise the OSISM Testbed.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="variables">Variables<a href="#variables" class="hash-link" aria-label="Direct link to Variables" title="Direct link to Variables">​</a></h4>
<p>The defaults for the OpenTofu variables are intended for <a href="https://regio.digital" target="_blank" rel="noopener noreferrer">REGIO.cloud</a>.</p>
<table><thead><tr><th style="text-align:left">Variable</th><th style="text-align:left">Default</th><th style="text-align:left">Note</th></tr></thead><tbody><tr><td style="text-align:left">availability_zone</td><td style="text-align:left"><code>nova</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">ceph_version</td><td style="text-align:left"><code>quincy</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">cloud_provider</td><td style="text-align:left"><code>regiocloud</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">configuration_version</td><td style="text-align:left"><code>main</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">deploy_monitoring</td><td style="text-align:left"><code>false</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">dns_nameservers</td><td style="text-align:left"><code>[&quot;8.8.8.8&quot;, &quot;9.9.9.9&quot;]</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">enable_config_drive</td><td style="text-align:left"><code>true</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">external_api</td><td style="text-align:left"><code>false</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">flavor_manager</td><td style="text-align:left"><code>SCS-4V-16-50</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">flavor_node</td><td style="text-align:left"><code>SCS-8V-32-50</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">image</td><td style="text-align:left"><code>Ubuntu 22.04</code></td><td style="text-align:left">Only Ubuntu 22.04 is currently supported</td></tr><tr><td style="text-align:left">image_node</td><td style="text-align:left"><code>Ubuntu 22.04</code></td><td style="text-align:left">Only Ubuntu 22.04 is currently supported</td></tr><tr><td style="text-align:left">keypair</td><td style="text-align:left"><code>testbed</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">manager_version</td><td style="text-align:left"><code>latest</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">network_availability_zone</td><td style="text-align:left"><code>nova</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">number_of_nodes</td><td style="text-align:left"><code>3</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">number_of_volumes</td><td style="text-align:left"><code>3</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">openstack_version</td><td style="text-align:left"><code>2023.2</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">prefix</td><td style="text-align:left"><code>testbed</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">public</td><td style="text-align:left"><code>external</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">refstack</td><td style="text-align:left"><code>false</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">volume_availability_zone</td><td style="text-align:left"><code>nova</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">volume_size_base</td><td style="text-align:left"><code>30</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">volume_size_storage</td><td style="text-align:left"><code>10</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left">volume_type</td><td style="text-align:left"><code>__DEFAULT__</code></td><td style="text-align:left"></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="overrides">Overrides<a href="#overrides" class="hash-link" aria-label="Direct link to Overrides" title="Direct link to Overrides">​</a></h4>
<table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>manager_boot_from_image</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>manager_boot_from_volume</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>neutron_availability_zone_hints_network</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>neutron_availability_zone_hints_router</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>neutron_router_enable_snat</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>nodes_boot_from_image</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>nodes_boot_from_volume</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>nodes_use_ephemeral_storage</code></td><td style="text-align:left"></td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="customisations">Customisations<a href="#customisations" class="hash-link" aria-label="Direct link to Customisations" title="Direct link to Customisations">​</a></h4>
<table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><code>access_floatingip</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>access_ipv4</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>access_ipv6</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>default</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>external_api</code></td><td style="text-align:left"></td></tr><tr><td style="text-align:left"><code>neutron_floatingip</code></td><td style="text-align:left"></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">​</a></h3>
<ul>
<li>The configuration is intentionally kept quite static. Please create no PRs to make the configuration more flexible/dynamic.</li>
<li>The OSISM documentation uses hostnames, examples, addresses etc. from OSISM Testbed.</li>
<li>The third volume (<code>/dev/sdd</code>) is not enabled for Ceph by default. This is to test the scaling of Ceph.</li>
<li>The manager is used as pull through cache for Docker images and Ubuntu packages. This reduces the amount of traffic consumed.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="supported-releases">Supported releases<a href="#supported-releases" class="hash-link" aria-label="Direct link to Supported releases" title="Direct link to Supported releases">​</a></h3>
<p>The following stable Ceph and OpenStack releases are supported.</p>
<p>The deployment of Ceph is based on <a href="https://docs.ceph.com/ceph-ansible/" target="_blank" rel="noopener noreferrer">ceph-ansible</a>.</p>
<ul>
<li>Ceph Quincy (<strong>default</strong>)</li>
<li>Ceph Reef</li>
</ul>
<p>The deployment of OpenStack is based on <a href="https://docs.openstack.org/kolla-ansible/latest/" target="_blank" rel="noopener noreferrer">kolla-ansible</a>.</p>
<ul>
<li>OpenStack 2023.1</li>
<li>OpenStack 2023.2 (<strong>default</strong>)</li>
<li>OpenStack 2024.1</li>
</ul>
<p>The deployment of Kubernetes is based on <a href="https://github.com/techno-tim/k3s-ansible" target="_blank" rel="noopener noreferrer">k3s-ansible</a>.</p>
<ul>
<li>Kubernetes v1.29 (<strong>default</strong>)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="included-services">Included services<a href="#included-services" class="hash-link" aria-label="Direct link to Included services" title="Direct link to Included services">​</a></h3>
<p>The following services can currently be used with the OSISM Testbed without further adjustments.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="infrastructure">Infrastructure<a href="#infrastructure" class="hash-link" aria-label="Direct link to Infrastructure" title="Direct link to Infrastructure">​</a></h4>
<ul>
<li>Ceph</li>
<li>Cluster API Management Cluster</li>
<li>Fluentd</li>
<li>Gnocchi</li>
<li>Grafana</li>
<li>Haproxy</li>
<li>Influxdb</li>
<li>Keepalived</li>
<li>Keycloak</li>
<li>Kubernetes</li>
<li>Mariadb</li>
<li>Memcached</li>
<li>Netbox</li>
<li>Netdata</li>
<li>Opensearch</li>
<li>Openvswitch</li>
<li>Patchman</li>
<li>Prometheus exporters</li>
<li>Rabbitmq</li>
<li>Redis</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openstack">OpenStack<a href="#openstack" class="hash-link" aria-label="Direct link to OpenStack" title="Direct link to OpenStack">​</a></h4>
<ul>
<li>Barbican</li>
<li>Ceilometer</li>
<li>Cinder</li>
<li>Designate</li>
<li>Glance</li>
<li>Heat</li>
<li>Horizon</li>
<li>Ironic</li>
<li>Keystone</li>
<li>Magnum</li>
<li>Manila</li>
<li>Neutron</li>
<li>Nova (with Libvirt/KVM)</li>
<li>Octavia</li>
<li>Senlin</li>
<li>Skyline</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="makefile-reference">Makefile reference<a href="#makefile-reference" class="hash-link" aria-label="Direct link to Makefile reference" title="Direct link to Makefile reference">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ make help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  make &lt;target&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  help                  Display this help.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  clean                 Destroy infrastructure with OpenTofu.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  wipe-local-install    Wipe the software dependencies in `venv`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  create                Create required infrastructure with OpenTofu.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  login                 Log in on the manager.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpn-wireguard         Establish a wireguard vpn tunnel.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpn-sshuttle          Establish a sshuttle vpn tunnel.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  bootstrap             Bootstrap everything.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  manager               Deploy only the manager service.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  identity              Deploy only identity services.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ceph                  Deploy only ceph services.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deploy                Deploy everything and then check it.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prepare               Run local preperations.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  deps                  Install software preconditions to `venv`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ make &lt;TAB&gt; &lt;TAB&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ci-jobs">CI jobs<a href="#ci-jobs" class="hash-link" aria-label="Direct link to CI jobs" title="Direct link to CI jobs">​</a></h3>
<p>You can inspect the <a href="https://zuul.services.betacloud.xyz/t/osism/builds?project=osism%2Ftestbed&amp;skip=0" target="_blank" rel="noopener noreferrer">results of the daily zuul jobs</a>.</p>
<table><thead><tr><th style="text-align:left">Name</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left">testbed-deploy</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">testbed-deploy-ceph</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">testbed-deploy-stable</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">testbed-update-stable</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">testbed-upgrade</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">testbed-upgrade-ceph</td><td style="text-align:left"></td></tr><tr><td style="text-align:left">testbed-upgrade-stable</td><td style="text-align:left"></td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/osism/osism.github.io/tree/main/docs/guides/other-guides/testbed.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/guides/other-guides/style-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Style Guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/references/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">References</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a><ul><li><a href="#cloud-access" class="table-of-contents__link toc-highlight">Cloud access</a></li><li><a href="#cloud-resources" class="table-of-contents__link toc-highlight">Cloud resources</a></li><li><a href="#software" class="table-of-contents__link toc-highlight">Software</a></li></ul></li><li><a href="#deployment" class="table-of-contents__link toc-highlight">Deployment</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a><ul><li><a href="#custom-ca" class="table-of-contents__link toc-highlight">Custom CA</a></li><li><a href="#vpn-access" class="table-of-contents__link toc-highlight">VPN access</a></li><li><a href="#static-entries-in-etchosts" class="table-of-contents__link toc-highlight">Static entries in <code>/etc/hosts</code></a></li><li><a href="#webinterfaces" class="table-of-contents__link toc-highlight">Webinterfaces</a></li><li><a href="#authentication-with-oidc" class="table-of-contents__link toc-highlight">Authentication with OIDC</a></li></ul></li><li><a href="#advanced-usage" class="table-of-contents__link toc-highlight">Advanced Usage</a><ul><li><a href="#external-api" class="table-of-contents__link toc-highlight">External API</a></li><li><a href="#change-versions" class="table-of-contents__link toc-highlight">Change versions</a></li><li><a href="#deploy-services" class="table-of-contents__link toc-highlight">Deploy services</a></li><li><a href="#upgrade-services" class="table-of-contents__link toc-highlight">Upgrade services</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#ansible-errors" class="table-of-contents__link toc-highlight">Ansible errors</a></li><li><a href="#unsupported-locale-setting" class="table-of-contents__link toc-highlight">Unsupported locale setting</a></li></ul></li><li><a href="#appendix" class="table-of-contents__link toc-highlight">Appendix</a><ul><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a></li><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a></li><li><a href="#supported-releases" class="table-of-contents__link toc-highlight">Supported releases</a></li><li><a href="#included-services" class="table-of-contents__link toc-highlight">Included services</a></li><li><a href="#makefile-reference" class="table-of-contents__link toc-highlight">Makefile reference</a></li><li><a href="#ci-jobs" class="table-of-contents__link toc-highlight">CI jobs</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs">Documentation</a></li><li class="footer__item"><a href="https://github.com/osism" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://zuul.services.betacloud.xyz/t/osism/status" target="_blank" rel="noopener noreferrer" class="footer__link-item">Zuul CI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/users">Users</a></li><li class="footer__item"><a class="footer__link-item" href="/partners">Partner Network</a></li><li class="footer__item"><a class="footer__link-item" href="/support">Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Comparisons</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/appendix/comparisons#osism-vs-fishos">OSISM vs. FishOS</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/appendix/comparisons#osism-vs-red-hat-openstack-services-on-openshift">OSISM vs. Red Hat OpenStack Services on OpenShift</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/appendix/comparisons#osism-vs-canonical-openstack">OSISM vs. Canonical OpenStack</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/appendix/comparisons#osism-vs-suse-openstack-cloud">OSISM vs. SUSE OpenStack Cloud</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/appendix/comparisons#osism-vs-mirantis-openstack-for-kubernetes">OSISM vs. Mirantis OpenStack for Kubernetes</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/appendix/comparisons#osism-vs-openstack-ansible">OSISM vs. OpenStack Ansible</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/contact-us">Contact Us</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/osism/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/about-us">About Us</a></li><li class="footer__item"><a class="footer__link-item" href="/jobs">Jobs</a></li><li class="footer__item"><a class="footer__link-item" href="/privacy">Privacy Policy</a></li><li class="footer__item"><a class="footer__link-item" href="/terms">Terms &amp; Conditions</a></li><li class="footer__item"><a class="footer__link-item" href="/legals">Legals</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 OSISM GmbH. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>