"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[5826],{3905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>h});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},m=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=p(n),c=i,h=d["".concat(s,".").concat(c)]||d[c]||u[c]||o;return n?a.createElement(h,r(r({ref:t},m),{},{components:n})):a.createElement(h,r({ref:t},m))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2891:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var a=n(7462),i=(n(7294),n(3905));const o={sidebar_label:"Bootstrap",sidebar_position:5},r="Bootstrap",l={unversionedId:"guides/deploy-guide/bootstrap",id:"guides/deploy-guide/bootstrap",title:"Bootstrap",description:"Provisioning of management and control plane nodes",source:"@site/docs/guides/deploy-guide/bootstrap.md",sourceDirName:"guides/deploy-guide",slug:"/guides/deploy-guide/bootstrap",permalink:"/docs/guides/deploy-guide/bootstrap",draft:!1,editUrl:"https://github.com/osism/osism.github.io/tree/main/docs/guides/deploy-guide/bootstrap.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_label:"Bootstrap",sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Deploy Guides",permalink:"/docs/guides/deploy-guide/"},next:{title:"Kubernetes",permalink:"/docs/guides/deploy-guide/kubernetes"}},s={},p=[{value:"Provisioning of management and control plane nodes",id:"provisioning-of-management-and-control-plane-nodes",level:2},{value:"Manual provisioning",id:"manual-provisioning",level:3}],m={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(d,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"bootstrap"},"Bootstrap"),(0,i.kt)("h2",{id:"provisioning-of-management-and-control-plane-nodes"},"Provisioning of management and control plane nodes"),(0,i.kt)("p",null,"For the initial deployment of the management plane and the control plane of OSISM,\nthe nodes must be pre-provisioned with Ubuntu 22.04. Currently, only Ubuntu 22.04 is supported\nby OSISM."),(0,i.kt)("p",null,"Data plane nodes can be automatically provisioned after the initial deployment and\ndo not need to be pre-provisioned."),(0,i.kt)("p",null,"It is recommended not to install the initial nodes of the management plane and the\ncontrol plane manually. An ISO image is provided for this purpose which automatically\nprovisions a node. The ISO images are available for download in the\n",(0,i.kt)("a",{parentName:"p",href:"https://github.com/osism/node-image"},"osism/node-image")," repository."),(0,i.kt)("p",null,"There are different variants of the ISO image. The variants differ in the disc layout.\nThe available variants are described in the README file of the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/osism/node-image"},"osism/node-image"),"\nrepository."),(0,i.kt)("h3",{id:"manual-provisioning"},"Manual provisioning"),(0,i.kt)("p",null,"If none of the provided variants is suitable, this section describes the manual\ninstallation with the help of the Ubuntu 22.04 live ISO image. The manual installation\nis possible without network connectivity."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Download the latest ISO image for Ubuntu 22.04 from ",(0,i.kt)("a",{parentName:"li",href:"https://www.releases.ubuntu.com/22.04/"},"releases.ubuntu.com"),".",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Use the ",(0,i.kt)("inlineCode",{parentName:"li"},"ubuntu-22.04.1-live-server-amd64.iso")," image."),(0,i.kt)("li",{parentName:"ul"},"The version number may be different, always use the latest available version of 22.04 LTS."))),(0,i.kt)("li",{parentName:"ul"},"Choose ",(0,i.kt)("inlineCode",{parentName:"li"},"English")," as language."),(0,i.kt)("li",{parentName:"ul"},"Choose ",(0,i.kt)("inlineCode",{parentName:"li"},"Install Ubuntu Server"),"."),(0,i.kt)("li",{parentName:"ul"},"Choose ",(0,i.kt)("inlineCode",{parentName:"li"},"English as language")," (again)."),(0,i.kt)("li",{parentName:"ul"},"Choose your location (e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"Germany"),")."),(0,i.kt)("li",{parentName:"ul"},"Choose ",(0,i.kt)("inlineCode",{parentName:"li"},"en_US.UTF-8")," as locale."),(0,i.kt)("li",{parentName:"ul"},"Choose the keyboard layout from a list, use ",(0,i.kt)("inlineCode",{parentName:"li"},"English (US)"),"."),(0,i.kt)("li",{parentName:"ul"},"Choose and configure the primary network interface.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Depending on the environment, the network may not work at this point. Then select any interface\nand then select ",(0,i.kt)("inlineCode",{parentName:"li"},"Do not configure the network at this time")," in the next step."))),(0,i.kt)("li",{parentName:"ul"},"Set the hostname.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The hostname is e.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"node")," and not a FQDN like ",(0,i.kt)("inlineCode",{parentName:"li"},"node.systems.osism.xyz"),"."))),(0,i.kt)("li",{parentName:"ul"},"Set ",(0,i.kt)("inlineCode",{parentName:"li"},"osism")," as full name for the new user."),(0,i.kt)("li",{parentName:"ul"},"Set ",(0,i.kt)("inlineCode",{parentName:"li"},"osism")," as the username for the account.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The later used operator user ",(0,i.kt)("inlineCode",{parentName:"li"},"dragon")," is created during the bootstrap and ",(0,i.kt)("strong",{parentName:"li"},"should not be created")," during the installation"),(0,i.kt)("li",{parentName:"ul"},"The account is only needed initially and can be deleted after completion of the bootstrap."))),(0,i.kt)("li",{parentName:"ul"},"Set a password for the account."),(0,i.kt)("li",{parentName:"ul"},"Choose ",(0,i.kt)("inlineCode",{parentName:"li"},"Manual")," as partitioning method and execute the partitioning according to company specifications",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"The use of a UEFI is recommended"),(0,i.kt)("li",{parentName:"ul"},"The use of a RAID is recommended. We prefer the use of software RAIDs to make us less dependent on hardware.\nBut there is nothing against using hardware RAIDs."),(0,i.kt)("li",{parentName:"ul"},"The use of a LVM2 is recommended. ",(0,i.kt)("inlineCode",{parentName:"li"},"system")," is recommended as the name for the volume group."),(0,i.kt)("li",{parentName:"ul"},"Dedicated disks may be provided for ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/docker")," on the controller nodes. In this case, do not\nuse an LV for ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/docker")," but the devices provided for it."),(0,i.kt)("li",{parentName:"ul"},"Do not configure devices that are not required for the operating system."),(0,i.kt)("li",{parentName:"ul"},"The use of own file systems for the following mountpoints is recommended. The size of the individual partitions\nis minimal. Depending on the node type, the individual partitions should be made larger. This applies in\nparticular to ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/docker"),". On controllers at least 100 GByte should be used.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/")," (10 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"root"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/home")," (2 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"home"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/tmp")," (5 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"tmp"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/ceph")," (50 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"ceph"),") (optional for storage nodes)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/docker")," (30 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"docker"),", do not set the ",(0,i.kt)("inlineCode",{parentName:"li"},"nosuid")," flag on ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/docker"),")",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"When using XFS as the file system for ",(0,i.kt)("inlineCode",{parentName:"li"},"/var/lib/docker"),", note the following: Running on XFS without ",(0,i.kt)("inlineCode",{parentName:"li"},"d_type")," support\ncauses Docker to skip the attempt to use the ",(0,i.kt)("inlineCode",{parentName:"li"},"overlay")," or ",(0,i.kt)("inlineCode",{parentName:"li"},"overlay2")," driver."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/var/log/audit")," (1 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"audit"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/var")," (10 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"var"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"swap")," (min 8 GByte, logical volume ",(0,i.kt)("inlineCode",{parentName:"li"},"swap"),")"))))),(0,i.kt)("li",{parentName:"ul"},"Choose ",(0,i.kt)("inlineCode",{parentName:"li"},"No automatic updates"),"."),(0,i.kt)("li",{parentName:"ul"},"Choose ",(0,i.kt)("inlineCode",{parentName:"li"},"OpenSSH server")," as software to install.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Do not install any other software component.")," Everything you need will be installed later by OSISM.\nIn particular, it is not necessary to install a desktop environment."))),(0,i.kt)("li",{parentName:"ul"},"After completion, restart the system.")))}u.isMDXComponent=!0}}]);