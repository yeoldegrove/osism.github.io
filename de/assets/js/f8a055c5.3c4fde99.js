"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[289],{1662:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=s(5893),t=s(1151);const r={sidebar_label:"OSISM 7"},o="OSISM 7",a={id:"release-notes/osism-7",title:"OSISM 7",description:"Instructions for the upgrade can be found in the Upgrade Guide.",source:"@site/docs/release-notes/osism-7.md",sourceDirName:"release-notes",slug:"/release-notes/osism-7",permalink:"/de/docs/release-notes/osism-7",draft:!1,unlisted:!1,editUrl:"https://github.com/osism/osism.github.io/tree/main/docs/release-notes/osism-7.md",tags:[],version:"current",frontMatter:{sidebar_label:"OSISM 7"},sidebar:"tutorialSidebar",previous:{title:"Release Notes",permalink:"/de/docs/release-notes/"},next:{title:"Appendix",permalink:"/de/docs/appendix/"}},l={},c=[{value:"7.0.5 (20240524)",id:"705-20240524",level:2},{value:"7.0.4 (20240507)",id:"704-20240507",level:2},{value:"7.0.3 (20240503)",id:"703-20240503",level:2},{value:"7.0.2 (20240407)",id:"702-20240407",level:2},{value:"7.0.1 (20240327)",id:"701-20240327",level:2},{value:"7.0.0 (20240320)",id:"700-20240320",level:2},{value:"Removals &amp; Deprecations",id:"removals--deprecations",level:3},{value:"New features",id:"new-features",level:3},{value:"Upgrade notes",id:"upgrade-notes",level:3},{value:"Known issues",id:"known-issues",level:3},{value:"Other &amp; References",id:"other--references",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"osism-7",children:"OSISM 7"}),"\n",(0,i.jsxs)(n.p,{children:["Instructions for the upgrade can be found in the ",(0,i.jsx)(n.a,{href:"../guides/upgrade-guide/manager",children:"Upgrade Guide"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"The release notes build on each other. When upgrading from 6.0.2 to 7.0.4, you should\ntherefore not only read and take into account the release notes for 7.0.4 but also the\nprevious release notes. The same applies to an update from, for example, 7.0.2 to 7.0.4.\nThe release notes for 7.0.3 must then also be taken into account."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Release"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Release Date"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"#705-20240524",children:"7.0.5"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"24. May 2024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"#704-20240507",children:"7.0.4"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"7. May 2024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"#703-20240503",children:"7.0.3"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"3. May 2024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"#702-20240407",children:"7.0.2"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"17. April 2024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"#701-20240327",children:"7.0.1"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"27. March 2024"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.a,{href:"#700-20240320",children:"7.0.0"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"20. March 2024"})]})]})]}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"7.0.0a, 7.0.0b, 7.0.0c, 7.0.0d are pre-releases. Do not use these releases."})}),"\n",(0,i.jsx)(n.h2,{id:"705-20240524",children:"7.0.5 (20240524)"}),"\n",(0,i.jsx)(n.p,{children:"Release date: 24. May 2024"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The Ceph service images have not been rebuilt. No upgrade of Ceph is required."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The OpenStack service images have not been rebuilt. No upgrade of OpenStack is required."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Bugfixes in the osism.commons.network role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"When extending the role for CentOS and RHEL, a bug was introduced that prevented existing\nNetplan files from being deleted on Ubuntu. This has been fixed."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Bugfixes in the osism.services.netdata role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The repositories used were changed from Packagecloud to the repositories offered by the\nNetdata project itself. In this way, unresolvable package dependencies on Ubuntu 22.04 are\nnow resolved."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New features in the osism.services.manager role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The use of the Netbox as the primary inventory is now optional, even with existing Netbox\nintegration. It is therefore important to set the parameter ",(0,i.jsx)(n.code,{children:"manager_inventory_from_netbox"}),"\nto ",(0,i.jsx)(n.code,{children:"true"})," before updating the manager service if the Netbox was previously used as the\nprimary inventory. By default, the Netbox is not longer used as the primary inventory."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/manager/configuration.yml',children:"manager_inventory_from_netbox: true\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New features in the osism.services.docker role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"docker_throttle_restart"})," parameter it's possible to\n",(0,i.jsx)(n.a,{href:"https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_strategies.html#restricting-execution-with-throttle",children:"throttle the service restarts"}),".\nBy default service restarts will not be throttled."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/configuration.yml',children:"docker_throttle_restart: 1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"docker_wait_after_restart"})," it is possible to wait ",(0,i.jsx)(n.code,{children:"docker_wait_after_restart_seconds"}),"\nseconds (60 seconds by default) after the restart of the Docker service. By default it will\nnot be waited after the restart of the Docker service."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/configuration.yml',children:"docker_wait_after_restart: true\ndocker_wait_after_restart_seconds: 60\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New features in the osism.services.traefik role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"traefik_configuration_extra"})," parameter it's possible to add\nextra configuration to the Traefik service."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"traefik_extra_ports"})," parameter it's possible to manage additional\nports with traefik. E.g. to manage port 5000 and port 8774:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"traefik_extra_ports:\n  - 5000\n  - 8774\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"traefik_configuration_dynamic"})," parameter it's possible to\ndefine additional services via the file provider."]}),"\n",(0,i.jsxs)(n.p,{children:["This will add a router that routes all requests on\n",(0,i.jsx)(n.code,{children:"api-81-163-192-117.traefik.me"})," to the service-horizon service."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'traefik_configuration_dyanmic:\n  tcp:\n    services:\n      service-horizon:\n        loadBalancer:\n          servers:\n            - address: "192.168.16.254:443"\n    routers:\n      router-horizon:\n        rule: "HostSNI(`api-81-163-192-117.traefik.me`)"\n        service: service-horizon\n        entryPoints:\n          - https\n        tls:\n          passthrough: true\n'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New features in the osism.commons.operator role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"operator_authorized_keys_delete"})," parameter it's possible to delete authorized keys\nfrom the authorized key files of the operator user account. This is the counterpart to\nthe ",(0,i.jsx)(n.code,{children:"operator_authorized_keys"})," parameter."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"operator_authorized_github_accounts_delete"})," parameter it's possible to delete\nall authorized keys from a list of GitHub accounts from the authorized key files of the operator\nuser account.  This is the counterpart to the ",(0,i.jsx)(n.code,{children:"operator_authorized_github_accounts"})," parameter."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New features in the osism.commons.known_hosts role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["With the ",(0,i.jsx)(n.code,{children:"known_hosts_delete"})," parameter it's possible to delete known hosts entries from the\nknown hosts file of the operator user account. This is the counterpart to the ",(0,i.jsx)(n.code,{children:"known_hosts"}),"\nand ",(0,i.jsx)(n.code,{children:"known_hosts_extra"})," parameters."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New features in the osism.commons.user role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["With the ",(0,i.jsx)(n.code,{children:"user_sudoers"})," parameter it's possible to change the content of the user sudoers file.\nThe default is ",(0,i.jsx)(n.code,{children:"ALL=(ALL:ALL) NOPASSWD: ALL"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New features in the osism.commons.proxy role."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Proxy settings are now removed when no proxy setings are set with the ",(0,i.jsx)(n.code,{children:"proxy_proxies"})," parameter."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New playbooks and changes in the existing playbooks."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ensure-no-instances"})," ensures that no instances are defined in Libvirt and that no qemu\nprocesses are running. This can be used in preparation for maintenance work on compute nodes.\nIn the future, the play will also take care of moving running or assigned instances from a\ncompute node with the help of the OSISM Resource Manager."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"loadbalancer-without-service-config"})," play it's possible to manage the loadbalancer service\nwithout including all the OpenStack service roles. This makes it possible to do a loadbalancer container\nimage upgrade pretty fast and also enables the deployment of multiple loadbalancers with separate\nconfigurations by using the sub environments."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"osism.commons.sshconfig"})," role and the ",(0,i.jsx)(n.code,{children:"osism.commons.certificates"})," role are now also run in\nthe bootstrap play of the Manager."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"k3s-upgrade"})," play it is possible to upgrade the internal K3s Kubernetes cluster."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New documentation."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The documentation for the\n",(0,i.jsx)(n.a,{href:"https://osism.tech/docs/guides/configuration-guide/configuration-repository",children:"initial creation of a configuration repository using Cookiecutter"}),"\nhas been completely revised. In the Cookiecutter itself, notes have been added in many places to simplify\nthe initial reworking of the created configuration repository."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Documentation for the ",(0,i.jsx)(n.a,{href:"https://osism.tech/docs/guides/configuration-guide/loadbalancer#second-loadbalancer",children:"deployment of a second loadbalancer"})," has been added."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Changes in the Testbed."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"It is now possible to provide the OpenStack APIs and the OpenStack Dashboard via a public IP address\nwith a public DNS record including Letsencrypt certificate via a customisation external-api via the\nmanager node."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Ansible, which is required to initially deploy the Manager, is now installed in a virtual environment.\nThis means that it is now also possible to use Ubuntu 24.04 as the operating system for the nodes."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The CLI of the ",(0,i.jsx)(n.a,{href:"https://github.com/osism/openstack-simple-stress",children:"Simple Stress tool"})," has been changed\nto ",(0,i.jsx)(n.a,{href:"https://typer.tiangolo.com",children:"Typer"}),". Units tests for improving code quality have been added."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New Kubernetes CAPI images for the Kubernetes serias 1.27, 1.28, 1.29, and 1.30 are available."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["To avoid confusion, ",(0,i.jsx)(n.code,{children:"rolling-upgrade"})," has been removed as a supported action for the ",(0,i.jsx)(n.code,{children:"osism apply"}),"\ncommand. The ",(0,i.jsx)(n.code,{children:"upgrade"})," action should always and exclusively be used."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"704-20240507",children:"7.0.4 (20240507)"}),"\n",(0,i.jsx)(n.p,{children:"Release date: 7. May 2024"}),"\n",(0,i.jsxs)(n.p,{children:["Due to an error in ",(0,i.jsx)(n.code,{children:"osism/sbom"})," repository, the Nova and Octavia images were not updated as\noriginally stated in the release notes for OSISM 7.0.3. Therefore it was unfortunately necessary\nto release a 7.0.4 which contains the correct SBOM. In 7.0.4 nothing has changed except the SBOM.\nThe correct images for Nova and Octavia are now included in 7.0.4 and the bugs listed below have\nbeen fixed. An update of the Manager Service must be done and then, if required, an update of Nova\nand Octavia can be updated as originally planned for OSISM 7.0.3. We apologise for the mistake and\nthe resulting effort."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The OpenStack service images for Octavia and Nova have been rebuilt. Upgrades of the Octavia\nand Nova services are recommended. No upgrades of other OpenStack and associated\ninfrastructure services such as MariaDB or RabbitMQ are required."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Nova images have been rebuilt to add packages to be able to use vTMP (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/1008",children:"osism/issues#1008"}),")\nIf this is not relevant, the upgrade can be skipped."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The octavia images have been rebuilt to resolve an issue when creating a LB + a listener\nwith an allowed_cidr with the fully-populated API (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/980",children:"osism/issues#980"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"When upgrading the Nova and Octavia API services, there is a short downtime of the APIs.\nThis downtime is usually less than 1 minute."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"703-20240503",children:"7.0.3 (20240503)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Release date: 3. May 2024"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The Ceph service images have not been rebuilt. No upgrade of Ceph is required."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The OpenStack service images have not been rebuilt. No upgrade of OpenStack is required."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["During the preparation of the upgrades of the regions of the PCO a bug (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/973",children:"osism/issues#973"}),")\nhas been noticed which leads to a delay of up to 2 minutes between the necessary container stops and starts.\nThis is due to a bug in the service units of all Kolla services. The bug is fixed in the current release.\n",(0,i.jsx)(n.strong,{children:"To avoid the delay during an upgrade, a fix must be applied in advance for all service units from\nKolla."})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply fix-gh973\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Kubernetes Cluster API image for the Kubernetes (K8s) 1.30 series is available. The images are now provided directly with\n",(0,i.jsx)(n.code,{children:"osism manage image clusterapi"}),". This means that K8s Cluster API images are now available\nfor K8s series 1.27, 1.28, 1.29 and 1.30."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"All Ansible collections have been prepared for use with Ubuntu 24.04. It is currently not recommended to\nupgrade existing clusters to Ubuntu 24.04 or to install new clusters with Ubuntu 24.04. There will be a note\nin future release notes that announces the full support of Ubuntu 24.04. At the moment everything related to Ubuntu\n24.04 is a technical preview."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["A new role ",(0,i.jsx)(n.code,{children:"tempest"})," has been added to the Ansible collection ",(0,i.jsx)(n.code,{children:"osism.validations"}),". This makes it possible\nto perform significantly more tests than with the previously used ",(0,i.jsx)(n.code,{children:"osism.validations.refstack"})," role. The new\nrole will be used in the testbed in future to significantly increase the number of tests performed in the CI."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["New documentation for the ",(0,i.jsx)(n.a,{href:"https://osism.tech/docs/guides/operations-guide/openstack/tools/project-manager",children:"project manager"}),"\nand the ",(0,i.jsx)(n.a,{href:"https://osism.tech/docs/guides/operations-guide/openstack/tools/simple-stress",children:"simple stress"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["When using the reboot play, it is now possible to wait for the reboot to be completed (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/758",children:"osism/issues#758"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply reboot \\\n  -e reboot_wait=yes \\\n  -e ireallymeanit=yes\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Monitoring services are now activated by default for the internal Kubernetes cluster."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"openstack_cacert"})," parameter used by Kolla is now set to ",(0,i.jsx)(n.code,{children:'"/etc/ssl/certs/ca-certificates.crt"'}),"\nby default. The previous default was ",(0,i.jsx)(n.code,{children:'""'}),". If this is not wanted, the parameter must be overwritten in\n",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ironic_agent_files_directory"})," parameter used by Kolla is now set to ",(0,i.jsx)(n.code,{children:"/share/ironic"})," by default.\nThe previous default was ",(0,i.jsx)(n.code,{children:'"{{ node_custom_config }}"'}),". If this is not wanted, the parameter must be overwritten\nin ",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),". This is in preparation for the Ironic IPA images no longer being\nstored in the configuration repository but within the manager service at runtime."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Ironic IPA images are now downloaded from ironic play by default. If this is not wanted,\n",(0,i.jsx)(n.code,{children:"enable_ironic_agent_download_images: false"})," must be set in ",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),".\nThe Ironic IPA images can now also be downloaded independently of the ironic play with ",(0,i.jsx)(n.code,{children:"osism apply ironic-download-ipa-images"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ceph_cluster_fsid"})," parameter is now generated automatically. It can be removed from ",(0,i.jsx)(n.code,{children:"environments/configuration.yml"}),".\nThe automatically generated ",(0,i.jsx)(n.code,{children:"ceph_clusterfs_fsid"})," parameter is set to the value of the ",(0,i.jsx)(n.code,{children:"fsid"}),"\nparameter from ",(0,i.jsx)(n.code,{children:"environments/ceph/configuration.yml"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["You can now use your own hook scripts in ",(0,i.jsx)(n.code,{children:"osism/cfg-cookiecutter"}),". These are placed in the directory\n",(0,i.jsx)(n.code,{children:"{{cookiecutter.project_name}}/scripts.d/"})," directory. The scripts are executed in alphabetical order.\nThe scripts must be executable."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Versions not yet pinned in the manager environment of the configuration repository (Ansible collections, ",(0,i.jsx)(n.code,{children:"osism/cfg-generics"}),", ..)\nare now automatically pinned during synchronisation with ",(0,i.jsx)(n.code,{children:"gilt overlay"}),". This also applies to the\n",(0,i.jsx)(n.code,{children:"osism update manager"})," script."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Docker version and the Docker CLI version can now also be managed via ",(0,i.jsx)(n.code,{children:"osism/cfg-generics"}),".\nIt is recommended to pin the Docker version in ",(0,i.jsx)(n.code,{children:"environments/configuration.yml"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"docker_version: '5:24.0.9'\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["When using the single service plays for Ceph (",(0,i.jsx)(n.code,{children:"ceph-osds"}),", ",(0,i.jsx)(n.code,{children:"ceph-mons"}),", ..), no service restarts\nare executed for other services. This can be adjusted with the ",(0,i.jsx)(n.code,{children:"ceph_handler_*_restart"})," parameters.\nThe default value is ",(0,i.jsx)(n.code,{children:"false"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"ceph_handler_crash_restart\nceph_handler_mdss_restart\nceph_handler_mgrs_restart\nceph_handler_mons_restart\nceph_handler_osds_restart\nceph_handler_rbdmirrors_restart\nceph_handler_rgws_restart\n"})}),"\n",(0,i.jsx)(n.p,{children:"The following example now makes it possible when adding new OSDs to really only start the OSDs that\nhave been newly added and to avoid a restart of all OSDs in the cluster or on a node."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply ceph-osds -e ceph_handler_osds_restart=False\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The restart of Ceph Services is now throttled. By default, only one Ceph service is restarted at a time.\nThis can be adjusted with the ",(0,i.jsx)(n.code,{children:"ceph_handler_*_restart_throttle"})," parameters. The default value is ",(0,i.jsx)(n.code,{children:"1"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"ceph_handler_crash_restart_throttle\nceph_handler_mdss_restart_throttle\nceph_handler_mgrs_restart_throttle\nceph_handler_mons_restart_throttle\nceph_handler_osds_restart_throttle\nceph_handler_rbdmirrors_restart_throttle\nceph_handler_rgws_restart_throttle\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["OVN container images will be built without the ",(0,i.jsx)(n.code,{children:"-march=broadwell"})," parameter in the future. The OVN\nimages have not been updated with this release, this only serves as an announcement for the future. By\nremoving the parameter, it is possible to use the OVN container images on older CPUs. It is planned to\nprovide different variants of the OVN and OVS container images in the future to enable parameters for\nmodern CPUs in order to improve performance in particular."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"This has nothing to do with the release itself and is just a notice. The build of the OpenStack Zed images has been\ndisabled."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"702-20240407",children:"7.0.2 (20240407)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Release date: 17. April 2024"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The Ceph & OpenStack service images have not been rebuilt. No upgrades of Ceph & OpenStack and associated\ninfrastructure services such as MariaDB or RabbitMQ are required."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Properties for device type ",(0,i.jsx)(n.code,{children:"vrfs"})," are now supported in the ",(0,i.jsx)(n.code,{children:"osism.commons.network"})," role."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Debian support in ",(0,i.jsx)(n.code,{children:"osism.commons"})," & ",(0,i.jsx)(n.code,{children:"osism.services"})," Ansible collection."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The roles of the ",(0,i.jsx)(n.code,{children:"osism.commons"})," collection are now usable with Debian. The roles have been tested with Debian Bookworm."]}),"\n",(0,i.jsxs)(n.li,{children:["The roles of the ",(0,i.jsx)(n.code,{children:"osism.services"})," collection are now usable with Debian. The roles have been tested with Debian Bookworm."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"If the OSISM CLI is executed as root user there is now an informal warning message."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Use a single network for Ceph frontend & backend in the cookiecutter. More information in the\n",(0,i.jsx)(n.a,{href:"https://docs.ceph.com/en/latest/rados/configuration/network-config-ref/",children:"Ceph network configuration reference"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"When synchronising the configuration repository, it is now ensured that you are on the correct branch."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Senlin images available again as rolling tag for OpenStack 2023.2."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Zun images available again as rolling tag for OpenStack 2023.2 & 2024.1."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"New FRR configuration template for loadbalancers with an external uplink in the osism.services.frr role."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"scs:name-v1"})," and ",(0,i.jsx)(n.code,{children:"scs:name-v2"})," extra specs are now set via the OpenStack flavor manager."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Task ID is now displayed in the output of the OSISM CLI for prepared tasks."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["New Makefile target in the OSISM Testbed to fetch the Wireguard configuration file: ",(0,i.jsx)(n.code,{children:"vpn-wireguard-config"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the play ",(0,i.jsx)(n.code,{children:"noop"})," it is now possible to run a play with noop. This is useful for testing purposes of the manager service."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The stable repository is now used as the default for the Netdata service in the ",(0,i.jsx)(n.code,{children:"osism.services.netdata"})," role. This avoids\npackage conflicts in future."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"701-20240327",children:"7.0.1 (20240327)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Release date: 27. March 2024"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["It's now possible to also use custom plays in the ",(0,i.jsx)(n.code,{children:"kolla"})," and in the ",(0,i.jsx)(n.code,{children:"ceph"})," environments.\nAs for the other environments, custom plays can now be stored there in a e.g. ",(0,i.jsx)(n.code,{children:"playbook-hello-world.yml"}),"\nfile and run by using e.g. ",(0,i.jsx)(n.code,{children:"osism apply -e kolla hello-world"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The version of k3s has been updated to ",(0,i.jsx)(n.code,{children:"1.29.2"}),". If Kubernetes is used, upgrade with\n",(0,i.jsx)(n.code,{children:"osism apply kubernetes"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["There is a new parameter ",(0,i.jsx)(n.code,{children:"ceph_custom_keys"})," in the ",(0,i.jsx)(n.code,{children:"copy-ceph-keys"})," play. This makes\nit possible to copy the keys from custom Ceph pools."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'ceph_custom_keys:\n  - src: ceph.client.manila1.keyring\n    dest: "{{ configuration_directory }}/environments/kolla/files/overlays/manila/ceph.client.manila1.keyring"\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["There is a new parameter ",(0,i.jsx)(n.code,{children:"with_keycloak"})," in the cookiecutter. This can now be used to\nselect whether the keycloak integration should be prepared or not."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["An error in the ",(0,i.jsx)(n.code,{children:"ceph-pools"})," play has been fixed that prevented the keys from being\ncreated for the pools."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"ceph-iscsigws"})," play has been removed. The iSCSI gateway is in maintenance as of\nNovember 2022. This means that it is no longer in active development and will not be\nupdated to add new features."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With ",(0,i.jsx)(n.code,{children:"ceph_serial"})," it is now possible to define how many hosts Ansible should manage at a single time\nin the Ceph plays."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply ceph-mgrs -e ceph_serial=1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With ",(0,i.jsx)(n.code,{children:"ANSIBLE_VERSION"})," it's now possible to overwrite the use Ansible version when working with the ",(0,i.jsx)(n.code,{children:"run.sh"}),"\nscript inside the manager environment."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"osism.commons.known_hosts"})," role has been completely revised."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"avoid duplicate entries in the destination file"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"avoid comments in the destination file"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"make use of static entries possible"}),"\n",(0,i.jsxs)(n.p,{children:["It's now possible to add a ",(0,i.jsx)(n.code,{children:"known_hosts"})," parameter to the host_vars to\nset static known hosts entries for a specific host. When this parameter\nis set ",(0,i.jsx)(n.code,{children:"ssh-keygen"})," will not be used to generate the known hosts entries\non the fly."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"known_hosts:\n  - ssh-rsa AAAAB3NzaC1y...\n  - ecdsa-sha2-nistp256 AAAAE2VjZHN...\n  - ssh-ed25519 AAAAC3NzaC1...\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"make use of extra entries possible"}),"\n",(0,i.jsxs)(n.p,{children:["It's now possible to add a ",(0,i.jsx)(n.code,{children:"known_hosts_extra"})," parameter to the configuration\nrepository to set extra known hosts entries."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"known_hosts_extra:\n  - testbed-node-1.testbed.osism.xyz ssh-rsa AAAAB3Nza...\n  - testbed-node-2.testbed.osism.xyz ssh-rsa AAAAB3Nza...\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Octavia images have been updated. If Octavia is used, an upgrade must be done\nwith ",(0,i.jsx)(n.code,{children:"osism apply -a upgrade octavia"}),". We addressed the following issues."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Backport of ",(0,i.jsx)(n.a,{href:"https://review.opendev.org/c/openstack/octavia/+/896995",children:"openstack/octavia#896995"})," to fix errors\nwhen deleting LB with broken amphorae."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Bugfix for ",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/890",children:"osism/issues#890"})," (Octavia (OVN) does\nnot find existing subnet) by enabling the use of the custom CA for octavia\nuser session queries with the following PR:\n",(0,i.jsx)(n.a,{href:"https://github.com/osism/container-images-kolla/pull/412",children:"osism/container-images-kolla#412"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"700-20240320",children:"7.0.0 (20240320)"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Release date: 20. March 2024"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Shortly before the release, ",(0,i.jsx)(n.a,{href:"https://github.com/retr0h/gilt",children:"gilt"}),"\nmade a major release which led to breaking changes. It is therefore important\nfor the moment to install ",(0,i.jsx)(n.code,{children:"python-gilt < 2"})," when synchronising the\nconfiguration repository against the generics. In the CI and within the container\nimages, we currently use ",(0,i.jsx)(n.code,{children:"python-gilt == 1.2.3"}),". This is also the version that's\ncurrently installed in the container images and that's set in the ",(0,i.jsx)(n.code,{children:"requirements.txt"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"removals--deprecations",children:"Removals & Deprecations"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The role ",(0,i.jsx)(n.code,{children:"osism.services.tang"})," for deploying the Tang service is deprecated in preparation for removal\nas it is currently not in a usable state. An attempt will be made to make the role usable until the next\nrelease. The same applies to Clevis integration via the ",(0,i.jsx)(n.code,{children:"osism.commons.clevis"})," role."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The role ",(0,i.jsx)(n.code,{children:"osism.services.openldap"})," for deploying the OpenLDAP service  has been removed."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The manager plays to control the Vault service (",(0,i.jsx)(n.code,{children:"seal"}),", ",(0,i.jsx)(n.code,{children:"unseal"}),", ..) have been removed as these tasks will\nbe realized directly via the OSISM CLI (",(0,i.jsx)(n.code,{children:"osism set vault password"}),", ..) in the future."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The role ",(0,i.jsx)(n.code,{children:"osism.services.bird"})," for deploying the Bird service has been removed."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"new-features",children:"New features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"osism manage image octavia"})," command it is possible to rotate the Octavia Amphora image,\nwhich is rebuilt daily. Older images are deactivated. The old images must be removed manually after\nrotating the amphorae instances."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"osism manage image clusterapi"})," command it is possible to import all currently stable Cluster\nAPI images (v1.27, v1.28, and v1.29). As soon as new minor or major versions are available, these are also\nimported. Old and no longer used versions must currently be removed manually."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The persistence feature in Octavia can enabled with the new ",(0,i.jsx)(n.code,{children:"enable_octavia_jobboard"})," parameter.\nThe jobboard in Octavia is an ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/octavia/latest/install/install-amphorav2.html",children:"experimental feature"}),".\nIt is not recommended to use it in production."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/kolla/configuration.yml"',children:'enable_octavia_jobboard: "yes"\n'})}),"\n",(0,i.jsx)(n.p,{children:"This requires an additional database, which is only created when Octavia play is run in bootstrap mode\nfirst."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"osism apply -a bootstrap octavia\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The secret ",(0,i.jsx)(n.code,{children:"octavia_persistence_database_password"})," must be added to\n",(0,i.jsx)(n.code,{children:"environments/kolla/secrets.yml"})," before."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/kolla/secrets.yml"',children:"octavia_persistence_database_password:  # generate with: pwgen 32 1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In preparation for the migration to Rook, the Rook operator is deployable on the internal Kubernetes\ncluster with ",(0,i.jsx)(n.code,{children:"osism apply rook"}),". The Rook operator is not yet used for the Ceph deployment. For the deployment\nof Ceph we still use the ceph-ansible project. For the next release a tool called ",(0,i.jsx)(n.a,{href:"https://github.com/sovereigncloudstack/rookify",children:"rookify"})," is planned to\nmigrate the Ceph deployment from ceph-ansible to Rook."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["CentOS 9 support in ",(0,i.jsx)(n.code,{children:"osism.commons`` & "}),"osism.services`` Ansible collection."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The roles of the `osism.commons`` collection are now usable with CentOS 9. The roles have been tested with\nCentOS 9."}),"\n",(0,i.jsx)(n.li,{children:"The roles of the `osism.services`` collection are now usable with CentOS 9. The roles have been tested with\nCentOS 9."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.a,{href:"https://github.com/osism/openstack-resource-manager",children:"openstack-resource-manager"})," it is now possible to\nclean up orphaned amphora instances of Octavia or volumes that are stuck in the ",(0,i.jsx)(n.code,{children:"DELETING"})," state."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Kubernetes can now be deployed with ",(0,i.jsx)(n.a,{href:"https://github.com/k3s-io/k3s-ansible",children:"k3s-ansible"})," on the management plane and the control plane."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["It is now possible to manage the Ceph pools independently of ",(0,i.jsx)(n.code,{children:"ceph-osds`` play using the "}),"ceph-pools` play."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"upgrade-notes",children:"Upgrade notes"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The switch from classic queue mirroring and durable queues to quorum queues\nin RabbitMQ has not yet been tested and documented. This is planned for the\nnext release. The switch is not yet recommended."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"hosts_interface"})," parameter is now set to ",(0,i.jsx)(n.code,{children:"internal_interface"})," by default."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The Keycloak deployment via Docker Compose, which was previously included\nas a technical preview, has been completely revised and is now deployed on\nKubernetes. No migration from the old deployment via Docker Compose to the\nnew deployment via Kubernetes has been prepared. If you are currently using\nthe Keycloak service, do not upgrade the Keycloak service and contact us in\nadvance."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Keystone role ",(0,i.jsx)(n.code,{children:"service"})," is required by a number of OpenStack services. The\nrole has been created automatically with new deployments for some time now. It is\npossible that this role is not yet available on older deployments and must be created\nonce in preparation for the upgrade. You can check whether the role is available in\nthe output of ",(0,i.jsx)(n.code,{children:"openstack --os-cloud admin role list"}),". If it does not exist, it can\nbe created with ",(0,i.jsx)(n.code,{children:"openstack --os-cloud admin role create service"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This ",(0,i.jsx)(n.code,{children:"service"})," role is required by the service accounts for authentication after the\nupgrade of the OpenStack services. To avoid problems during the upgrade, it is important\nto assign this role to all existing service accounts in advance."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"# List all users in the project service with the admin role. The existing service\n# accounts depend on the deployed services and may vary.\n$ openstack --os-cloud admin role assignment list --names --role admin --project service\n+-------+--------------------------+-------+-----------------+--------+--------+-----------+\n| Role  | User                     | Group | Project         | Domain | System | Inherited |\n+-------+--------------------------+-------+-----------------+--------+--------+-----------+\n| admin | ironic@Default           |       | service@Default |        |        | False     |\n| admin | neutron@Default          |       | service@Default |        |        | False     |\n| admin | gnocchi@Default          |       | service@Default |        |        | False     |\n| admin | swift@Default            |       | service@Default |        |        | False     |\n| admin | nova@Default             |       | service@Default |        |        | False     |\n| admin | placement@Default        |       | service@Default |        |        | False     |\n| admin | cinder@Default           |       | service@Default |        |        | False     |\n| admin | glance@Default           |       | service@Default |        |        | False     |\n| admin | designate@Default        |       | service@Default |        |        | False     |\n| admin | octavia@Default          |       | service@Default |        |        | False     |\n| admin | skyline@Default          |       | service@Default |        |        | False     |\n| admin | ironic-inspector@Default |       | service@Default |        |        | False     |\n| admin | ceilometer@Default       |       | service@Default |        |        | False     |\n+-------+--------------------------+-------+-----------------+--------+--------+-----------+\n\n# Assign the service role to all users in the project service (repeat this step for every\n# user in the list.\n$ openstack --os-cloud admin role add --user ironic --project service service\n[...]\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The use of ProxySQL for MariaDB is now possible and it is possible to switch\nto it as part of the upgrade. It is not mandatory and there is no recommendation.\nThe parameter ",(0,i.jsx)(n.code,{children:"enable_proxysql"})," is added to ",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),"\nfor this purpose."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/kolla/configuration.yml"',children:"enable_proxysql: yes\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The secrets listed below (",(0,i.jsx)(n.code,{children:"proxysql_admin_password"}),", ",(0,i.jsx)(n.code,{children:"proxysql_stats_password"}),",\n",(0,i.jsx)(n.code,{children:"mariadb_monitor_password"}),") must also be added or changed."]}),"\n",(0,i.jsx)(n.p,{children:"When migrating to ProxySQL, it is important to upgrade MariaDB first."}),"\n",(0,i.jsx)(n.p,{children:"When migrating to ProxySQL, it is important to perform the loadbalancer upgrade\nbefore all OpenStack service upgrades. To make sure that the OpenStack services\ncontinue to work after the upgrade when ProxySQL is enabled as part of the upgrade,\nthe ProxySQL service must have been deployed first. The ProxySQL service is deployed\nwith the loadbalancer play."}),"\n",(0,i.jsx)(n.p,{children:"It is possible that connectivity with the database may be interrupted for a short time\nduring the migration. It is therefore recommended to carry out extensive tests on the\nstaging environment in advance."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The following secrets must be added in ",(0,i.jsx)(n.code,{children:"environments/kolla/secrets.yml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/kolla/secrets.yml"',children:"octavia_persistence_database_password:  # generate with: pwgen 32 1\nprometheus_bcrypt_salt:                 # generate with: pwgen 22 1 <-- there's a 22\nprometheus_grafana_password:            # generate with: pwgen 32 1\nprometheus_password:                    # generate with: pwgen 32 1\nproxysql_admin_password:                # generate with: pwgen 32 1\nproxysql_stats_password:                # generate with: pwgen 32 1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The parameter ",(0,i.jsx)(n.code,{children:"mariadb_monitoring_password"})," in ",(0,i.jsx)(n.code,{children:"environments/kolla/secrets.yml"}),"\nhas to be renamed to ",(0,i.jsx)(n.code,{children:"mariadb_monitor_password"}),". If the parameter is not present,\nit is added."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/kolla/secrets.yml"',children:"mariadb_monitor_password:     # generate with: pwgen 32 1\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The following parameters must be removed from the configuration repository from\n",(0,i.jsx)(n.code,{children:"environments/kolla/configuration.yml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="environments/kolla/configuration.yml"',children:"ceph_nova_user: nova\nceph_nova_keyring: ceph.client.nova.keyring\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Parameters for the Netbox service in ",(0,i.jsx)(n.code,{children:"environments/infrastructure/configuration.yml"})," or\n",(0,i.jsx)(n.code,{children:"secrets.yml"})," must now also be added in ",(0,i.jsx)(n.code,{children:"environments/manager/configuration.yml"})," or\n",(0,i.jsx)(n.code,{children:"secrets.yml"}),". In an upcoming  release, the parameters can be removed from the\ninfrastructure environment."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The Ansible callback plugin ",(0,i.jsx)(n.code,{children:"osism.commons.still_alive"})," is now available to avoid timeouts\nfor long-running tasks. This currently has to be explicitly enabled in the Ansible configuration.\nThis is done in the ",(0,i.jsx)(n.code,{children:"environments/ansible.cfg"})," file in the configuration repository.\nThe callback plugin is enabled by default in the future. After this change has been made, the\nupdate of the manager must be performed. A manager with a version before OSISM 7.0.0 cannot be\nlonger used if this plugin is set in ",(0,i.jsx)(n.code,{children:"environments/ansible.cfg"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="environments/ansible.cfg"',children:"[defaults]\n...\nstdout_callback = osism.commons.still_alive\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["In the inventory, the ",(0,i.jsx)(n.code,{children:"nova_backend"})," parameter must be added to the host vars of\ncompute nodes where local storage is used."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"nova_backend: default\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The SSL certificate file ",(0,i.jsx)(n.code,{children:"haproxy.pem"})," is now available in a different location in the\n",(0,i.jsx)(n.code,{children:"haproxy"})," container. Previously it was stored under ",(0,i.jsx)(n.code,{children:"/etc/haproxy/haproxy.pem"}),". From\nnow on it is stored under ",(0,i.jsx)(n.code,{children:"/etc/haproxy/certificates/haproxy.pem"}),". If you have customised\nthe configuration for the haproxy service or use overlays for this, adjust the locations of\nthe SSL certificate as required."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Due to the upgrade from Fluentd to version 5, some directory names within the container\nimage for Fluentd have changed. If you have worked with overlay files in the Fluentd service,\ncheck these in advance. Currently we know that ",(0,i.jsx)(n.code,{children:"/var/run/td-agent"})," is now available as\n",(0,i.jsx)(n.code,{children:"/var/run/fluentd"})," (check ",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/864",children:"osism/issues#864"}),"\nfor details).  We assume that other directory names have changed similarly."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If a Keystone domain with LDAP backend is used, it is important to add the ",(0,i.jsx)(n.code,{children:"tls_cacertfile"}),"\nparameter in the ",(0,i.jsx)(n.code,{children:"[ldap]"})," section of the corresponding domain configuration."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"[ldap]\n...\ntls_cacertfile = /etc/ssl/certs/ca-certificates.crt\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"known-issues",children:"Known issues"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If error ",(0,i.jsx)(n.code,{children:"Couldn't fetch the key client.bootstrap-rbd at /var/lib/ceph/bootstrap-rbd/.\""}),"\noccurs when updating Ceph in task ",(0,i.jsx)(n.code,{children:"create potentially missing keys (rbd and rbd-mirror)"}),",\ncreate directory ",(0,i.jsx)(n.code,{children:"/var/lib/ceph/bootstrap-rbd/"})," on the 1st control node used for Ceph.\nUse the UID ",(0,i.jsx)(n.code,{children:"64045"})," and the GID ",(0,i.jsx)(n.code,{children:"64045"}),". Set ",(0,i.jsx)(n.code,{children:"0755"})," as permissions."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["There are currently problems when using a custom CA in combination with Octavia (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/890",children:"osism/issues#890"}),").\nA bugfix for this will be made available soon."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["There is another problem when using Octavia in combination with OVN which leads to a leakage\nof ports when deleting load balancers (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/921",children:"osism/issues#921"}),").\nA bugfix for this is also expected to be available soon."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The manager service is updated via ",(0,i.jsx)(n.code,{children:"osism update manager"}),". If this command is not yet\navailable, you can use ",(0,i.jsx)(n.code,{children:"osism-update-manager"})," as an alternative."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-console",children:"osism: 'update manager' is not an osism command. See 'osism --help'.\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["With some upgrades we noticed that in certain constellations there were problems with the\nOpenStack Octavia service, which could be prevented if the parameter ",(0,i.jsx)(n.code,{children:"valid_interfaces"})," was added\nto the ",(0,i.jsx)(n.code,{children:"environments/kolla/files/overlays/octavia.conf"})," file (",(0,i.jsx)(n.a,{href:"https://github.com/osism/issues/issues/1021",children:"osism/issues#1021"}),")."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",metastring:'title="environments/kolla/files/overlays/octavia.conf"',children:"[certificates]\nvalid_interfaces = internal\n\n[keystone_authtoken]\nvalid_interfaces = internal\n\n[glance]\nvalid_interfaces = internal\n\n[neutron]\nvalid_interfaces = internal\n\n[nova]\nvalid_interfaces = internal\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"other--references",children:"Other & References"}),"\n",(0,i.jsx)(n.p,{children:"Refstack 2022.11 results:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"======\nTotals\n======\nRan: 356 tests in 1221.9879 sec.\n  - Passed: 353\n  - Skipped: 3\n  - Expected Fail: 0\n  - Unexpected Success: 0\n  - Failed: 0\nSum of execute time for each test: 715.6658 sec.\n"})}),"\n",(0,i.jsxs)(n.p,{children:["OpenStack 2023.2 press announcement: ",(0,i.jsx)(n.a,{href:"https://www.openstack.org/software/openstack-bobcat",children:"https://www.openstack.org/software/openstack-bobcat"})]}),"\n",(0,i.jsxs)(n.p,{children:["OpenStack 2023.2 release notes: ",(0,i.jsx)(n.a,{href:"https://releases.openstack.org/bobcat/index.html",children:"https://releases.openstack.org/bobcat/index.html"})]}),"\n",(0,i.jsx)(n.p,{children:"Release notes for each OpenStack service:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Barbican: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/barbican/2023.2.html",children:"https://docs.openstack.org/releasenotes/barbican/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Ceilometer: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/ceilometer/2023.2.html",children:"https://docs.openstack.org/releasenotes/ceilometer/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Cinder: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/cinder/2023.2.html",children:"https://docs.openstack.org/releasenotes/cinder/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Designate: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/designate/2023.2.html",children:"https://docs.openstack.org/releasenotes/designate/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Glance: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/glance/2023.2.html",children:"https://docs.openstack.org/releasenotes/glance/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Heat: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/heat/2023.2.html",children:"https://docs.openstack.org/releasenotes/heat/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Horizon: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/horizon/2023.2.html",children:"https://docs.openstack.org/releasenotes/horizon/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Ironic: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/ironic/2023.2.html",children:"https://docs.openstack.org/releasenotes/ironic/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Keystone: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/keystone/2023.2.html",children:"https://docs.openstack.org/releasenotes/keystone/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Manila: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/manila/2023.2.html",children:"https://docs.openstack.org/releasenotes/manila/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Neutron: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/neutron/2023.2.html",children:"https://docs.openstack.org/releasenotes/neutron/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Nova: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/nova/2023.2.html",children:"https://docs.openstack.org/releasenotes/nova/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Octavia: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/octavia/2023.2.html",children:"https://docs.openstack.org/releasenotes/octavia/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Placement: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/placement/2023.2.html",children:"https://docs.openstack.org/releasenotes/placement/2023.2.html"})]}),"\n",(0,i.jsxs)(n.li,{children:["Skyline: ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/skyline-apiserver/2023.2.html",children:"https://docs.openstack.org/releasenotes/skyline-apiserver/2023.2.html"}),", ",(0,i.jsx)(n.a,{href:"https://docs.openstack.org/releasenotes/skyline-console/2023.2.html",children:"https://docs.openstack.org/releasenotes/skyline-console/2023.2.html"})]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>o});var i=s(7294);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);