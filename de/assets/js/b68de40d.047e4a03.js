"use strict";(self.webpackChunkosism=self.webpackChunkosism||[]).push([[6641],{336:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>a});var o=i(5893),s=i(1151);const t={sidebar_label:"Provisioning",sidebar_position:30},r="Provisioning of bare-metal nodes",l={id:"guides/deploy-guide/provisioning",title:"Provisioning of bare-metal nodes",description:"For the initial deployment of the management plane and the control plane of OSISM,",source:"@site/docs/guides/deploy-guide/provisioning.md",sourceDirName:"guides/deploy-guide",slug:"/guides/deploy-guide/provisioning",permalink:"/de/docs/guides/deploy-guide/provisioning",draft:!1,unlisted:!1,editUrl:"https://github.com/osism/osism.github.io/tree/main/docs/guides/deploy-guide/provisioning.md",tags:[],version:"current",sidebarPosition:30,frontMatter:{sidebar_label:"Provisioning",sidebar_position:30},sidebar:"tutorialSidebar",previous:{title:"Manager",permalink:"/de/docs/guides/deploy-guide/manager"},next:{title:"Bootstrap",permalink:"/de/docs/guides/deploy-guide/bootstrap"}},d={},a=[{value:"Manual provisioning",id:"manual-provisioning",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"provisioning-of-bare-metal-nodes",children:"Provisioning of bare-metal nodes"}),"\n",(0,o.jsx)(n.p,{children:"For the initial deployment of the management plane and the control plane of OSISM,\nthe nodes must be pre-provisioned with Ubuntu 22.04. Currently, only Ubuntu 22.04 is supported\nby OSISM."}),"\n",(0,o.jsx)(n.p,{children:"Data plane nodes can be automatically provisioned after the initial deployment and\ndo not need to be pre-provisioned."}),"\n",(0,o.jsxs)(n.p,{children:["It is recommended not to install the initial nodes of the management plane and the\ncontrol plane manually. An ISO image is provided for this purpose which automatically\nprovisions a node. The ISO images are available for download in the\n",(0,o.jsx)(n.a,{href:"https://github.com/osism/node-image",children:"osism/node-image"})," repository."]}),"\n",(0,o.jsxs)(n.p,{children:["There are different variants of the ISO image. The variants differ in the disc layout.\nThe available variants are described in the README file of the ",(0,o.jsx)(n.a,{href:"https://github.com/osism/node-image",children:"osism/node-image"}),"\nrepository."]}),"\n",(0,o.jsx)(n.h2,{id:"manual-provisioning",children:"Manual provisioning"}),"\n",(0,o.jsx)(n.p,{children:"If none of the provided variants is suitable, this section describes the manual\ninstallation with the help of the Ubuntu 22.04 live ISO image. The manual installation\nis possible without network connectivity."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Download the latest ISO image for Ubuntu 22.04 from ",(0,o.jsx)(n.a,{href:"https://www.releases.ubuntu.com/22.04/",children:"releases.ubuntu.com"}),".","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Use the ",(0,o.jsx)(n.code,{children:"ubuntu-22.04.1-live-server-amd64.iso"})," image."]}),"\n",(0,o.jsx)(n.li,{children:"The version number may be different, always use the latest available version of 22.04 LTS."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Choose ",(0,o.jsx)(n.code,{children:"English"})," as language."]}),"\n",(0,o.jsxs)(n.li,{children:["Choose ",(0,o.jsx)(n.code,{children:"Install Ubuntu Server"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Choose ",(0,o.jsx)(n.code,{children:"English as language"})," (again)."]}),"\n",(0,o.jsxs)(n.li,{children:["Choose your location (e.g. ",(0,o.jsx)(n.code,{children:"Germany"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:["Choose ",(0,o.jsx)(n.code,{children:"en_US.UTF-8"})," as locale."]}),"\n",(0,o.jsxs)(n.li,{children:["Choose the keyboard layout from a list, use ",(0,o.jsx)(n.code,{children:"English (US)"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Choose and configure the primary network interface.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Depending on the environment, the network may not work at this point. Then select any interface\nand then select ",(0,o.jsx)(n.code,{children:"Do not configure the network at this time"})," in the next step."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Set the hostname.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The hostname is e.g. ",(0,o.jsx)(n.code,{children:"node"})," and not a FQDN like ",(0,o.jsx)(n.code,{children:"node.systems.osism.xyz"}),"."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Set ",(0,o.jsx)(n.code,{children:"osism"})," as full name for the new user."]}),"\n",(0,o.jsxs)(n.li,{children:["Set ",(0,o.jsx)(n.code,{children:"osism"})," as the username for the account.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The later used operator user ",(0,o.jsx)(n.code,{children:"dragon"})," is created during the bootstrap and ",(0,o.jsx)(n.strong,{children:"should not be created"})," during the installation"]}),"\n",(0,o.jsx)(n.li,{children:"The account is only needed initially and can be deleted after completion of the bootstrap."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"Set a password for the account."}),"\n",(0,o.jsxs)(n.li,{children:["Choose ",(0,o.jsx)(n.code,{children:"Manual"})," as partitioning method and execute the partitioning according to company specifications","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"The use of a UEFI is recommended"}),"\n",(0,o.jsx)(n.li,{children:"The use of a RAID is recommended. We prefer the use of software RAIDs to make us less dependent on hardware.\nBut there is nothing against using hardware RAIDs."}),"\n",(0,o.jsxs)(n.li,{children:["The use of a LVM2 is recommended. ",(0,o.jsx)(n.code,{children:"system"})," is recommended as the name for the volume group."]}),"\n",(0,o.jsxs)(n.li,{children:["Dedicated disks may be provided for ",(0,o.jsx)(n.code,{children:"/var/lib/docker"})," on the controller nodes. In this case, do not\nuse an LV for ",(0,o.jsx)(n.code,{children:"/var/lib/docker"})," but the devices provided for it."]}),"\n",(0,o.jsx)(n.li,{children:"Do not configure devices that are not required for the operating system."}),"\n",(0,o.jsxs)(n.li,{children:["The use of own file systems for the following mountpoints is recommended. The size of the partitions/LVs\nis minimal. Depending on the node type, the partitions/LVs should be made larger.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/"})," (10 GByte, logical volume ",(0,o.jsx)(n.code,{children:"root"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/home"})," (2 GByte, logical volume ",(0,o.jsx)(n.code,{children:"home"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/tmp"})," (5 GByte, logical volume ",(0,o.jsx)(n.code,{children:"tmp"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/var/lib/ceph"})," (50 GByte, logical volume ",(0,o.jsx)(n.code,{children:"ceph"}),") (optional for storage nodes)"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/var/lib/docker"})," (30 GByte, logical volume ",(0,o.jsx)(n.code,{children:"docker"}),", do not set the ",(0,o.jsx)(n.code,{children:"nosuid"})," flag on ",(0,o.jsx)(n.code,{children:"/var/lib/docker"}),")","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["When using XFS as the file system for ",(0,o.jsx)(n.code,{children:"/var/lib/docker"}),", note the following: Running on XFS without ",(0,o.jsx)(n.code,{children:"d_type"})," support\ncauses Docker to skip the attempt to use the ",(0,o.jsx)(n.code,{children:"overlay"})," or ",(0,o.jsx)(n.code,{children:"overlay2"})," driver."]}),"\n",(0,o.jsx)(n.li,{children:"100 GB should be used on a control node at the beginning."}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/var/lib/docker"})," must be extended later during operation depending on the node type. You do this\nin operation when you can see how many logs etc. are generated."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/var/log/audit"})," (1 GByte, logical volume ",(0,o.jsx)(n.code,{children:"audit"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"/var"})," (10 GByte, logical volume ",(0,o.jsx)(n.code,{children:"var"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"swap"})," (8 GByte, logical volume ",(0,o.jsx)(n.code,{children:"swap"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Choose ",(0,o.jsx)(n.code,{children:"No automatic updates"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Choose ",(0,o.jsx)(n.code,{children:"OpenSSH server"})," as software to install.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Do not install any other software component."})," Everything you need will be installed later by OSISM.\nIn particular, it is not necessary to install a desktop environment."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:"After completion, restart the system."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>r});var o=i(7294);const s={},t=o.createContext(s);function r(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);